version=pmwiki-2.3.21 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum=#configphp-order per-user, CondAuth() (-20) (+55)
name=PmWikiDe.LocalCustomizations
rev=45
targets=PmWikiDe.WikiAdministrator,PmWikiDe.GroupCustomizations,PmWikiDe.DocumentationIndex,PmWikiDe.Skins,PmWikiDe.Internationalizations,PmWikiDe.CustomMarkup,PmWikiDe.InterMap,PmWikiDe.PmWikiPhilosophy,PmWikiDe.Variables,PmWikiDe.DebugVariables,Cookbook.ControllingWebRobots,Cookbook.Cookbook,PmWikiDe.BasicVariables,PmWikiDe.PathVariables,Cookbook.SQLite,Cookbook.CompressedPageStore,Cookbook.PerGroupSubDirectories,PmWikiDe.UTF-8,PmWikiDe.MailingLists,PmWikiDe.Upgrades,Site.PageNotFound,PmWikiDe.PageNotFound,PmWikiDe.LocalCustomizations
text=(:title Lokale Anpassungen:)%0a(:Summary: Passen Sie Ihre PmWiki-Installation mit Hilfe von ''@@config.php@@'' und ''@@local.css@@'' an Ihre Bedürfnisse an.:)%0a(:Original_Page: PmWiki.{$Name}:)%0a(:Translation_Date: 2012-06-28:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Autoren (Grundlagen):)%0a%0aEin [[WikiAdministrator|Administrator des Wikis]] kann eine Menge Anpassungen vornehmen, indem er einfach Variablen in der ''@@local/config.php@@''-Datei setzt und "''cascading style sheets''" (CSS) in der ''/pub/css/local.css''-Datei definiert. Jede Gruppe oder Seite kann darüber hinaus [[GroupCustomizations|ihre eigene Konfigurationsdatei und CSS-Konfigurationsdatei]] haben.%0a%0aDiese Seite beschreibt, wie Anpassungen im Allgemeinen funktionieren, siehe [[DocumentationIndex|+]] wegen genauerer Informationen über spezielle Anpassungen, die gewöhnlich bei vielen PmWiki-Installationen durchgeführt werden, einschließlich:%0a%0a* [[Skins|Layout Vorlagen]] - {Skins$:Summary}%0a* [[Internationalizations|Internationalisierungen]] - {Internationalizations$:Summary}%0a* [[Custom markup|Eigene Auszeichnungen]] - {CustomMarkup$:Summary}%0a* [[InterMap|InterMap anpassen]] - {InterMap$:Summary}%0a%0a%0a[[#configphp]]%0a!!local/config.php%0aVon Anbeginn an wurde PmWiki so entworfen, dass ein [[Wiki Administrator|+]] die Art, wie PmWiki Seiten anzeigt und wie die Auszeichnungssequenzen zum Seiten erzeugen genutzt werden, weitgehend anpassen kann. (Das wird sogar ausdrücklich in der [[PmWiki Philosophy(#collaborativemaintenance)|+]] #4 - gemeinsame Wartung - erwähnt.) Im Ergebnis macht das zentrale pmwiki.php-Skript intensiven Gebrauch von [[Variables|+]], um zu bestimmen, wie Auszeichnungssequenzen verarbeitet werden sollen und was jede individuelle Seite ausgibt.%0a%0aDie einfachste Art der Anpassung ist, eine Variable auf 1 zu setzen (oder auf TRUE). Hier ist ein Beispiel, das [@?action=diag@]- und [@?action=phpinfo@]-Aktionen möglich macht:%0a%0a->%25hlt php%25@@$EnableDiag = 1;@@%0a%0aSie können eine Zeile mit einem "#" beginnen (einem Doppelkreuz, auch bekannt als Nummernzeichen, "Fis" oder "Lattenzaun"), um damit einen Kommentar einzuleiten.%0aAußerdem nehmen einige PmWiki-Variablen andere Werte als 1 und 0 (true und false) an. Hier ist ein weiteres Beispiel, das des Wikis Verhalten bezogen auf Suchmaschinenrobotern anpasst (siehe [[Cookbook:ControllingWebRobots]]): %0a%0a->%25hlt php%25[@%0a# Entferne das standardmäßige "rel='nofollow'"-Attribut für externe Verweise.%0a$UrlLinkFmt = "%3ca class='urllink' href='\$LinkUrl' title='\$LinkAlt'>\$LinkText%3c/a>"%0a@]%0a%0aDas Unterverzeichnis ''@@scripts/@@'' (unter dem Verzeichnis, das ''@@pmwiki.php@@'' enthält) beinhaltet viele Anpassungen. Das PmWiki-[[(Cookbook:)Cookbook|Kochbuch]] enthält viele Beispiele zu Anpassungen, die Sie in Ihr ''@@cookbook/@@''-Unterverzeichnis herunterladen können. Die erste paar Zeilen in jedem Skript enthalten generell Instruktionen, wie die Features des Skripts aktiviert und eingesetzt werden. %0a%0aDiese Anpassungen werden in Ihre ''QQconfig.phpQQ''-Datei eingefügt. Bei den meisten Skripts reichte es aus%0a%0a->%25hlt php%25[@include_once("cookbook/rezeptdatei.php");@]%0aund%0a->%25hlt php%25[@include_once("scripts/skriptdatei.php");@]%0a%0airgendwo an Ende der Datei ''config.php'' unterzubringen, um dessen Funktionen zu aktivieren. %0a%0aManche Skripts werden automatisch über die Datei ''@@scripts/stdconfig.php@@'' aktiviert, solange man nicht @@$EnableStdConfig=0;@@ in der Datei ''@@local/config.php@@'' setzt.%0a%0a%0a[[#configphp-order]] [[#PostConfig]]%0a!!!Reihenfolge der Befehle in @@config.php@@%0a%0aDie folgende Reihenfolge ist zu empfehlen:%0a%0a* definieren Sie $ScriptUrl und $PubDirUrl, wo nötig,%0a* definieren Sie eine angepasste PageStore_class wie [[(Cookbook:)SQLite]], [[(Cookbook:)CompressedPageStore]] oder [[(Cookbook:)PerGroupSubDirectories]],%0a* als Nächstes fügen Sie %25hlt php%25[@include_once("scripts/xlpage-utf-8.php")@] ein,%0a* als Nächstes rufen Sie %25hlt php%25[@XLPage()@] auf, das erwartet, dass das definierte (rw) $WikiDir-Verzeichnis schon gesetzt ist, damit XLPage() die Wiki-Seite mit den Übersetzungen auch finden kann,%0a* als Nächstes müssen Sie ''@@authuser.php@@'' einfügen (wenn Sie das einsetzen wollen), weil PmWiki einige Seiten- und Gruppenautorisierungsniveaus zwischenspeichert, wenn auf eine Seite zugegriffen wird,%0a* als Nächstes fügen Sie alle anderen Skripten und Rezepte und deren Konfigurationen ein,%0a** richten Sie sich nach den Notwendigkeiten und Hinweisen, die Sie den Rezepten finden: manche müssen vor oder nach anderen eingefügt werden, manche Rezepte werden vor, manche nach dem Einfügen konfiguriert.%0a%0a>>frame hlt php%3c%3c%0aWenn Sie Variablen oder Addons für Gruppen, Seiten, per-user-Variablen oder Addons setzen müssen, wird empfohlen, sie in Dateien namens ''@@local/Group.php@@'' und ''@@local/Group.Page.php@@'' einzufügen. Wenn Sie es von der ''@@config.php@@''-Datei aus machen müssen oder wenn Sie diese Variablen setzen müssen, nachdem die lokalen Dateien eingefügt wurden, nutzen Sie das Folgende am Ende der ''@@config.php@@''-Datei:%0a%0a  $pagename = ResolvePageName($pagename);%0a  include_once("$FarmD/scripts/pgcust.php");%0a  list($group, $name) = explode('.', $pagename);%0a  if ($group != 'Private') {...} # tue, was nötig ist%0a  if (CondAuth($pagename, 'edit')) {...} # nur für Editoren%0a%0aJegliche direkten Funktionsaufrufe in @@config.php@@ wie @@CondAuth()@@, @@PageTextVar()@@, @@PageVar()@@, @@RetrieveAuthPage()@@ oder andere sollten wenn möglich weit zum Ende der @@config.php@@-Datei hin nach dem obigen Schnipsel erfolgen. Alternativ können Sie sie in einer eigenen Funktion oder einem eigenen Skript im $PostConfig-Array unterbringen:%0a%0a  # PmWiki will call this function and include this file '''after'''%0a  #    farmconfig.php, config.php, Group.Page.php and Group.php%0a  #    but '''before''' scripts/stdconfig.php:%0a  function MyFunction1($pagename) {...}%0a  $PostConfig['MyFunction1'] = 25;               # %3c 50%0a  $PostConfig["cookbook/some-addon.php"] = 26;   # %3c 50%0a%0a  # PmWiki will call this function and include this file '''after'''%0a  #    farmconfig.php, config.php, Group.Page.php, Group.php%0a  #    and '''after''' scripts/stdconfig.php:%0a  function MyFunction2($pagename) {...}%0a  $PostConfig['MyFunction2'] = 125;              # >= 50%0a  $PostConfig["cookbook/other-addon.php"] = 100; # >= 50%0a%0aDie $PostConfig-Funktionen und -Skripten werden in der Reihenfolge ihrer Werte aufgerufen, d.&nbsp;h. im obigen Beispiel wird "MyFunction2" (125) nach "other-addons.php" (100) aufgerufen. Das erlaubt den Rezeptautoren mehr Kontrolle über die genaue Reihenfolge ihrer Rezepte in Bezug auf andere Rezepte (wenn das wichtig ist).%0a>>%3c%3c%0a%0a''Beachten Sie, '''keines''' dieser Teile ist zwingend notwendig, wenn Sie es aber einsetzen, dann ist dies die empfohlene Reihenfolge in config.php''.%0a%0a[[#encoding]]%0a!!!  Zeichencodierung von config.php%0a%0aDie Codierung hat einen Effekt, wenn Sie die ''[@config.php@]''-Datei speichern. Ihr Editor sollte Ihnen erlauben, die Datei in der Codierung ihres Wikis zu speichern. (Die Voreinstellung von PmWiki ist ISO-8859-1, für neue Wikis wird empfohlen, UTF-8 zu aktivieren.)%0a%0aNeuere Betriebssysteme wie GNU/Linux, FreeBSD und Apple haben generell die Voreinstellung Unicode/UTF-8  für das Speichern von Dateien. %0aIn Windows ist die Voreinstellung für die Codierung ANSI/Windows-1252, was fast das Gleiche wie PmWikis ISO-8859-1 ist.%0a%0aDie folgenden frei verfügbaren Texteditoren können Dateien in verschieden Codierungen bearbeiten und speichern:%0a* Cross-platform: [[https://kate-editor.org/ |Kate]] (for KDE), [[https://www.geany.org/ |Geany]], [[https://www.arachnoid.com/arachnophilia/index.html|Arachnophilia]], [[https://www.scintilla.org/SciTE.html|SciTE]], [[https://bluefish.openoffice.nl/|Bluefish]], [[https://www.vim.org/|vim]] und andere.%0a* Windows: [[https://notepad-plus-plus.org/ |Notepad++]], [[https://www.contexteditor.org/|ConTEXT]].%0a* OS X: [[https://aquamacs.org/|Aquamacs]].%0a%0aBeachten Sie, dass Sie, wenn Sie UTF-8-Codierung benutzen, die Datei "''ohne Byte Order Mark (BOM)''" speichern müssen.  %0a%0aMit der Zeit (seit mindestens Version 2.2.75 der Fall) wird es ein PmWiki-Update geben, das PmWiki mit der Voreinstellung auf die UTF-8-Codierung umstellt, mit der sich alle möglichen Alphabete und Sprachen darstellen lassen. Siehe [[UTF-8]] wegen weiterer Informationen.%0a%0a%0a[[#localcss]]%0a!!pub/css/local.css%0a%0aSie können diese Datei anlegen und dort ein paar angepasste CSS-Stile definieren, welche die vom Skin vorgegebenen Stile überschreiben. Zum Beispiel:%0a%0a%25hlt css%25[@%0a  h1, h2, h3, h4, h5 { color: #880000; } /*dunkelrote Titel*/%0a  a { text-decoration: none; } /* unterstreiche Verweise nicht */%0a@]%0a%0aCSS-Dateien werden in der folgenden Reihenfolge eingepflegt%0a# @@$PubDirUrl/css/local.css@@ '-&ndash; für das ganz Wiki-'%0a# @@$PubDirUrl/css/[@{$Group}.css@]@@ '-&ndash; für Gruppen-'%0a# @@$PubDirUrl/css/[@{$FullName}.css@]@@ '-&ndash; für einzelne Seiten-'%0a# @@$PageCSSListFmt@@%0a%0a!! Verändern Sie die pmwiki.php-Datei nicht direkt%0a!!!!(auch keine anderen Kerndateien)%0a%0aSie sollten unbedingt der Versuchung widerstehen, die Datei ''@@pmwiki.php@@'' oder die Dateien im Unterverzeichnis ''@@scripts/@@'' direkt zu verändern. Jegliche Änderung wird möglicherweise mit dem nächsten [[Upgrade(s)]] überschrieben. Stattdessen sollten Sie Ausschau nach Anpassungen halten, die in der Datei ''@@config.php@@'' durchgeführt werden können. Sie können sogar Ihr eigenes Skript erzeugen und es mit %25hlt php%25@@include_once(...)@@%25%25 in der ''@@config.php@@'' einbinden. Wenn Sie eigene Skripten mit Anpassungen erstellen, können Sie diese problemlos im Unterverzeichnis ''@@cookbook/@@'' speichern. Dort werden sie bei Upgrades nicht überschrieben. Eventuell möchten Sie auch diese Anpassungen anderen über die [[Mailing lists|pmwiki-users Mailingliste]] oder das [[Cookbook:Cookbook|Kochbuch]] zur Verfügung stellen, so dass auch andere Benutzer davon profitieren können, oder es sogar in eine zukünftige Version von PmWiki einfließen kann.%0a%0a!!FAQ%0a>>faq%3c%3c [[#faq]]%0a%0aQ: Es gibt gar keine "@@config.php@@"-Datei, es ist nicht einmal klar, was eine "lokale Anpassungsdatei" sein soll!%0a%0aA: Die "@@sample-config.php@@"-Datei im "docs"-Verzeichnis ist als Beispiel mitgeliefert. Kopieren Sie sie in das "local"-Verzeichnis und nennen Sie es in "@@config.php@@" um. Sie können dann die "#"-Symbole entfernen oder andere Befehle hinzufügen, die Sie in der Dokumentation gesehen haben. Siehe auch [[GroupCustomizations|+]].%0a%0aQ: Kann ich die Standardseite auf etwas anderes als @@Main.HomePage@@ ($DefaultPage) einstellen?%0a%0aA: Ja, Sie müssen nur die $DefaultPage-Variable auf den Namen der Seite setzen, die Sie als Standard wünschen. Sie könnten auch mal einen Blick auf die  $DefaultGroup- und $DefaultName-Konfigurationsvariablen werfen.%0a%0a->%25hlt php%25[@$DefaultPage = 'ABC.StartPage';@]%0a%0aBeachten Sie die Empfehlungen zu $DefaultName und die Notwendigkeit, auch $PagePathFmt zu setzen, wenn Sie die Standardstartseite für Gruppen ändern.%0a%0aQ: [[#configphp-group-page]] Wie bekomme ich Zugriff auf den Gruppen- oder Seitennamen in einer Anpassungsdatei (z. B. ''config.php'')?%0a%0aA: Benutzen Sie den folgenden Code für pmwiki-2-1-beta21 oder neuer:%0a%0a%25hlt php%25[@%0a## Hole den Gruppen- und den Seitennamen%0a$pagename = ResolvePageName($pagename);%0a$page = PageVar($pagename, '$FullName');%0a$group = PageVar($pagename, '$Group');%0a$name = PageVar($pagename, '$Name');%0a@]%0a%0aBeachten Sie die Wichtigkeit der [[#configphp-order|Reihenfolge der Anpassungen in der @@config.php@@-Datei weiter oben]], um Probleme mit Zwischengespeichertem zu vermeiden. %0a%0aWenn Sie den wortgetreuen Seiten- oder Gruppennamen (vom Seitenaufruf des Browsers) sehr früh in ''@@config.php@@'' brauchen, ist $pagename garantiert gesetzt auf%0a# den Wert von ?n=, wenn er gesetzt ist, oder%0a# den Wert von ?pagename=, wenn der gesetzt ist, oder%0a# die "path info"-Information aus dem REQUEST_URI (was auch immer hinter dem SCRIPT_NAME folgt), oder %0a# auf einen leeren String.%0ain Übereinstimmung mit [[https://pmichaud.com/pipermail/pmwiki-users/2011-May/058905.html|diesem Posting]].%0a%0aQ: Kann ich etwas aus meinem ''wikilib.d/''-Verzeichnis löschen?%0a%0aA: Die Dateien mit den Namen Site.* und SiteAdmin.* enthalten Teile des Interfaces und der Konfiguration und sie sollten nicht entfernt werden. Die anderen Dateien namens PmWiki* oder z. B. PmWikiDe* enthalten die Dokumentation und können entfernt werden. %0a%0aQ: Wie passe ich meine eigene Fehler-404-Seite für nicht vorhandene Seiten an?%0a%0aA: Um den Text der Nachricht zu ändern, bearbeiten Sie die Seite [[Site.PageNotFound]].%0a%0aA: Wenn Sie Ihre Site auf eine deutsche Oberfläche umgestellt haben (&rarr; [[Internationalizations|+]]), wird die Seite [[PmWikiDe.PageNotFound]] statt dessen eingeblendet. Sie sollten dann also diese Seite bearbeiten.%0a%0aQ: Ist die Reihenfolge der Einträge in der ''config.php''-Datei wichtig? Gibt es gewisse Dinge, die vor oder hinter anderen in dieser Datei kommen müssen?%0a%0aA: Ja, siehe [[LocalCustomizations#configphp-order|Reihenfolge der Anpassungen in @@config.php@@]] oben.%0a%0aQ: Ich habe ein online gehostetes Wiki und eine lokale Kopie davon auf meinem heimischen Rechner. Wie kann ich in der ''@@config.php@@''-Datei unterscheiden, ob ich online bin oder auf dem lokalen Rechner? Ich möchte die ''@@config.php@@''-Datei nicht zweimal pflegen müssen.%0a%0aA: Sie können eventuell das Folgende probieren:%0a%25hlt php%25[@%0aif($_SERVER['SERVER_ADDR'] == '127.0.0.1') {%0a  # Home wiki%0a%0a}%0aelse {%0a  # Online wiki%0a%0a}@]%0a%0aA: Sie können %25hlt php%25@@$EnableDiag = 1;@@ in die ''@@config.php@@''-Datei für beide Server einfügen und ?action=diag ansehen.%0a%0aA: Die [[https://www.php.net/manual/de/reserved.variables.server.php|$_SERVER]][==]-Variable hat auf verschiedenen Servern auch verschiedene Werte, insbesondere 'SERVER_ADDR' oder 'SERVER_NAME'. Sie können die verschiedenen Wikis auf der Basis der verschiedenen Werte konfigurieren.%0a%0a[[#faqend]]%0a>>%3c%3c%0a
time=1678690956
title=Lokale Anpassungen
