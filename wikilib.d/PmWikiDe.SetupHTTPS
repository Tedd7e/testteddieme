version=pmwiki-2.2.129 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum=link text translated (+5)
ctime=1503301746
name=PmWikiDe.SetupHTTPS
rev=12
targets=PmWikiDe.PathVariables,PmWikiDe.InitialSetupTasks,Cookbook.SwitchToSSLMode
text=(:title HTTPS aufsetzen:)%0a(:Summary: Wie man HTTPS einrichtet:)%0a(:Original_Page: PmWiki.{$Name}:)%0a(:Translation_Date: 2017-08-20:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Administratoren:)%0a%0aDie Internetgemeinde bewegt sich rasch in Richtung %25newwin%25[[https://support.google.com/webmasters/answer/6073543?hl=de|sicherer Webseiten]], indem sie HTTPS (Hypertext Transfer Protocol Secure) nutzt.%0a%0aBedenken Sie, dass %25newwin%25[[https://webmasters.googleblog.com/2014/08/https-as-ranking-signal.html|HTTPS]] und [[https://support.google.com/adsense/answer/6196932?hl=en|mobile friendly]] als Rankingkriterien von Suchmaschinen benutzt werden.%0a%0aDiese Seite ist ein Platzhalter und dient dazu, Informationen von der E-Mail-Liste und von Rezepten im Hauptteil von PmWiki zusammenzutragen.%0a%0a!! Behandlung von HTTPS-Anfragen durch PmWiki%0a%0aPmWiki antwortet '''jetzt schon''' angemessen auf HTTPS-Anfragen &ndash; es erkennt, wenn eine Anfrage über HTTPS hereinkommt und wandelt seine herausgehenden Verweise entsprechend um. Das bedarf keiner neuen Variablen.%0a%0aWenn Sie alle PmWiki-Verweise zwingen wollen, HTTPS zu benutzen, passen Sie $ScriptUrl und $PubDirUrl entsprechend an.%0a%0aDie ''@@docs/sample-config.php@@''-Datei enthält:%0a->[@# $ScriptUrl = 'http://www.mydomain.com/path/to/pmwiki.php'; @]%0a->[@# $PubDirUrl = 'http://www.mydomain.com/path/to/pub'; @]%0aSie möchten Sie vielleicht ändern in:%0a->[@  $ScriptUrl = 'https://'.$_SERVER['HTTP_HOST'].'/pmwiki/pmwiki.php'; @]%0a->[@  $PubDirUrl = 'https://'.$_SERVER['HTTP_HOST'].'/pmwiki/pub'; @]%0a%0aEs besteht eine gute Chance, dass eine Site $ScriptUrl ohnehin schon in der ''local/config.php''-Datei gesetzt hat &ndash; das ist schließlich eines der ersten Dinge, die in ''docs/sample-config.php'' erwähnt werden, auch in der Dokumentation der [[initial setup tasks|ersten Einstellungen]].%0a%0aEs wäre gut, die Einstellungen in der ''docs/config.sample.php''-Datei zu ergänzen, sodass sie etwa das Folgende einschließt:%0a->[@# If you prefer HTTPS over HTTP linkages:%0a   # $UrlScheme = 'https';%0a   # $ScriptUrl = 'https://www.mydomain.com/path/to/pmwiki.php';%0a   # $PubDirUrl = 'https://www.mydomain.com/path/to/pub'; @]%0a%0a!! PmWiki leitet HTTP automatisch auf HTTPS um%0a%0aPmWiki dazu zu bringen, automatisch HTTP-Anfragen auf HTTPS umzuleiten, … das klingt nach einem Rezept. Und es wäre sowieso viel effizienter, das auf dem Webserver-Niveau zu behandeln (z.&nbsp;B. über ''.htaccess'', Redirect, etc.).%0a%0aFügen Sie am Beginn der ''config.php''-Datei für Versionen nach 2.2.0-beta18 ein:%0a>>frame%3c%3c%0a[@%0aif ($UrlScheme == 'http') {%0a  header( "Location: " . "https://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] );%0a  exit('%3chtml>%3cbody>%0a    %3ca href="https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] . '">Please use HTTPS%3c/a>%0a    %3c/body>%3c/html>');%0a}%0a$ScriptUrl = "https://".$_SERVER['HTTP_HOST']."/pmwiki/pmwiki.php";%0a$PubDirUrl = 'https://'.$_SERVER['HTTP_HOST'].'/pmwiki/pub';@]%0a>>%3c%3c%0a%0a!! Zertifikate%0a%0aSie brauchen ein Zertifikat von einer ''Certificate Authority'' (CA), ein selbst-signiertes Zertifikat ist nicht mehr länger angemessen'^%25newwin%25[[https://www.thoughtco.com/signed-vs-self-signed-certificates-3469534|#]]^'. %0a* %25newwin%25[[https://letsencrypt.org/|Let’s Encrypt]] ist eine freie, automatisierte und offene ''Certificate Authority''.%0a** EFFs %25newwin%25[[https://certbot.eff.org/|CertBot]] erteilt Let's-Encrypt-Zertifikate, um Ihr PmWiki automatisch HTTPS-fähig zu machen.%0a** %25newwin%25[[https://certifytheweb.com/ | Certify the Web]] bietet einen Windows-nativen-Klienten zum Abrufen und Installieren eines Let's-Encrypt-Zertifikats.%0a%0a!! .htaccess für HTTPS benutzen%0aFügen Sie in einer @@.htaccess@@-Datei im @@public_html@@-Verzeichnis das Folgende an oder erzeugen Sie ggf. eine solche Datei mit dem Inhalt. %0aFügen Sie folgende Zeilen hinzu: %0a->[@RewriteEngine On%0aRewriteCond %25{HTTPS} off%0aRewriteRule ^(.*)$ https://%25{HTTP_HOST}%25{REQUEST_URI} [L,R=301] @]%0aStellen Sie sicher, dass die Zeile @@RewriteEngine On@@ nicht doppelt auftaucht '^%25newwin%25[[https://www.hostinger.com/tutorials/ssl/forcing-https|#]]^'.%0a%0a!! HTTPS beim IIS aufsetzen%0aDie folgenden Schritte helfen, PmWiki mit [[https://support.microsoft.com/en-nz/help/324069/how-to-set-up-an-https-service-in-iis|HTTPS auf IIS]] zum Laufen zu bekommen.%0a* Folgen Sie den obigen Schritten, um HTTPS in PmWiki zu aktivieren und besorgen Sie sich ein SSL-Zertifikat.%0a* In IIS wählen Sie den Server und 'Server Certificates'.%0a** Wenn Ihr Zertifikat hier noch nicht zu sehen ist (z.&nbsp;B. von LetsEncrypt), importieren Sie es.%0a** Aktivieren Sie %25newwin%25[[https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-85/certificate-rebind-in-iis85|Automatic Rebind]] für das erneuerte Zertifikat.%0a* Wählen Sie in IIS die zu sichernde Website.%0a** Wählen Sie die 'Binding action', fügen eine Bindung vom Typ @@https@@ für Ihren Hostnamen hinzu, wählen Sie dann das zu benutzende SSL-Zertifikat.%0a%0aSie können Ihre http-Zugriffe auch auf https %25newwin%25[[https://www.namecheap.com/support/knowledgebase/article.aspx/9953/38/setting-up-an-httphttps-redirect-in-iis|umleiten]].%0a%0a!! Prüfen Sie auch%0a* Ihr Router ist so eingestellt, dass er Datenaustausch über Port 443 (HTTPS) erlaubt.%0a* Ihre Firewall ist so eingestellt, dass sie Datenaustausch über Port 443 (HTTPS) erlaubt.%0a* IIS SSL Einstellungen sind eingestellt auf Client certificates: ignore%0a%0a!! Ein einfacherer Weg%0aSie könnten statt dessen auch einfach das Folgende machen:%0a%0a->[@  $ScriptUrl = '//your-host-name.com/pmwiki/pmwiki.php'; @]%0a->[@  $PubDirUrl = '//your-host-name.com/pmwiki/pub'; @]%0a%0aSie müssten nur alle 'http:' oder 'https:' entfernen, allerdings bricht das die Kompatibilität mit älteren Browsern und einigen PmWiki-Rezepten wie ''googledocviewer'', seien Sie vorsichtig.%0a%0a!! Referenzen%0a* [[Cookbook:SwitchToSSLMode]]%0a* [[PmWikiUsers:2017-June/063852.html]]%0a* [[PmWikiUsers:2017-May/063842.html]]%0a* [[PmWikiUsers:2017-February/063703.html]]%0a* [[PmWikiUsers:2017-February/063711.html]]%0a* [[PmWikiUsers:2017-February/063700.html]]%0a* [[https://serverguy.com/security/redirect-http-to-https/ | Wie Sie HTTP auf HTTPS umleiten mit Hilfe einer ''.htaccess''-Datei]] - [-englisch-]%0a
time=1591596908
title=HTTPS aufsetzen
