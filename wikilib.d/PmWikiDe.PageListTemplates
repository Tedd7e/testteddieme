version=pmwiki-2.3.22 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum=+Test/EachCount link (+85)
ctime=1304664551
name=PmWikiDe.PageListTemplates
rev=24
targets=PmWikiDe.PageLists,Site.PageListTemplates,Site.LocalTemplates,PmWikiDe.PagelistVariables,Cookbook.PagelistTemplateSamples,PmWikiDe.PageVariables,PmWikiDe.PageTextVariables,Cookbook.Cookbook,Cookbook.DictIndex,Cookbook.SimpleForum
text=(:title Seitenlistenvorlagen:)%0a(:Summary: So stellt man sich Vorlagen für eigene [[PmWikiDe/page lists|Seitenlisten]] her:)%0a(:Original_Page: PmWiki.{$Name}:)%0a(:Translation_Date: 2011-05-01:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Administratoren (FTP):)%0a%0aPmWikis Standardvorlagen für [[page lists|+]] sind in [[Site.PageListTemplates]] (''wikilib.d'') zu finden, diese Seite wird bei Upgrades ersetzt. Die darin enthaltenen Standardvorlagen können ergänzt oder überschrieben werden mit angepassten Vorlagen, die an anderer Stelle gespeichert werden. %0a%0a!! Standard-[[page lists|+]][==]-Vorlage%0a%0aPmWikis Standardkonfiguration sucht in den folgenden Seiten in dieser Reihenfolge nach der Vorlage:%0a# in der Seite, deren Name als Teil der Vorlage angegeben ist,%0a# in der aktuelle Seite,%0a# in [[Site.LocalTemplates]] und schließlich%0a# in [[Site.PageListTemplates]]%0a %0aWenn die Vorlage in einer Seitenleiste (sidebar), im Kopf- oder Fußbereich der Gruppe (groupheader/-footer), etc. definiert ist, muss der Seitenname als Teil des Vorlagennamen angegeben werden. \\%0aAdministratoren können diese Orte ändern, indem sie die Variable $FPLTemplatePageFmt benutzen.%0a%0aWenn die Vorlage in die aktuellen Seite eingebettet ist, muss die aktuelle Seite erst gespeichert werden, bevor Auswirkungen an Änderungen der Vorlage sichtbar werden. Die Vorschau allein reicht dafür nicht aus.%0a%0a!! Angepasste Seitenlistenvorlagen%0aAngepasste Vorlagen werden in der gleichen Weise benutzt wie die Standardvorlagen: durch Verweisen auf das gewünschte Format mit der %25pmhlt%25[@fmt=#anker@]-Option. Es gibt verschiedene Wege anzuzeigen, welche Vorlage gewünscht wird:%0a* %25pmhlt%25[@fmt=#custom@] benutzt den #custom-Abschnitt der aktuellen Seite, der Seite [[Site.LocalTemplates]] oder der Seite  [[Site.PageListTemplates]], je nachdem, wo der Abschnitt zuerst gefunden wird (Abschnitte sind gekennzeichnet durch [@[[#custom]]@]- und [@[[#customend]]@]-Anker).%0a* [@fmt=MeineVorlagenSeite#custom@] benutzt ein angepasstes Format, das in der Seite @@MeineVorlagenSeite@@ im Abschnitt #custom zu finden ist.%0a* [@fmt=MeineVorlagenSeite@] benutzt ein angepasstes Format aus der kompletten Seite @@MeineVorlagenSeite@@.%0a* [@fmt=custom@] benutzt ein angepasstes Format, das in einem Kochbuchskript namens ''custom'' definiert ist. Beachten Sie das Fehlen des '#' vor @@custom@@.  %0a%0aSiehe Cookbook:PagelistTemplateSamples für Beispiele von angepassten Seitenlistenformaten.%0a%0a!!Seitenlistenvorlagen erzeugen%0aEine Seitenlistenvorlage enthält Standard-PmWiki-Markups. %0aWenn man eine Seitenlistenausgabe erzeugt, iteriert PmWiki über jede Seite, die die Seitenliste ausgibt und dekoriert jede einzelne Seite mit Formatierungsanweisungen (Markups). %0a%0a[[#specialreferences]]%0a!!!Spezielle Verweise%0aWährend der Seitenlisteniteration setzt PmWiki drei spezielle Seitenverweise: '''=''', '''%3c''' und '''>'''. Diese speziellen Verweise werden für jede Seitenlisteniteration aufgefrischt und können mit der [[PmWikiDe/page variables|Seitenvariablen]]-Syntax benutzt werden, wie etwa ''{=$variable}'', um eine Seitenlistenvorlage zu definieren, die die Seitenlistenausgabe gestaltet. Die Bedeutung dieser speziellen Verweise sind:%0a%0a||%0a||= ||aktuelle Seite  ||&rarr; also zeigt %25pmhlt%25[@{=$title}@] den Titel der aktuellen Seite in der Iteration an||%0a||%3c ||vorherige Seite ||&rarr; also zeigt ''%25pmhlt%25[@{%3c$Group}@] die Gruppe der vorherigen Seite in der Iteration an||%0a||> ||nächste Seite   ||&rarr; also zeigt ''%25pmhlt%25[@{>$Name}@] den Namen der nächsten Seite in der Iteration an||%0a%0aDie '''>'''- und '''%3c'''-Verweise sind höchst nützlich, um die Seitenlistenausgabe vor und nach der aktuellen Seitenliste zu strukturieren. Einige gebräuchliche Tests, mit denen man die Listenausgabe strukturieren kann, sind:%0a%0a(:table class=frame:)%0a(:cellnr:)%25pmhlt%25[@(:template first:)@]%0a(:cell:)[- {- %25gray%25[=(:if equal {%3c$Group}:)=]%25%25 -} -]%0a(:cell:)Iteration ist am Beginn der Liste%0a(:cellnr:)%25pmhlt%25[@(:template last:)@]%0a(:Cell:)[- {- %25gray%25[=(:if equal {>$Group}:)=]%25%25 -} -]%0a(:cell:)Iteration ist am Ende der Liste%0a(:cellnr:)%25pmhlt%25[@(:template first {=$Group}:)@]%0a(:cell:)[- {- %25gray%25[=(:if ! equal {=$Group} {%3c$Group}:)=]%25%25 -} -]%0a(:cell:)Iteration ist am ersten Item in einer Gruppe%0a(:cellnr:)%25pmhlt%25[@(:template last  {=$Group}:)@]%0a(:cell:)[- {- %25gray%25[=(:if ! equal {=$Group} {>$Group}:)=]%25%25 -} -]%0a(:cell:)Iteration ist am letzten Item in einer Gruppe %0a(:cellnr:)%25pmhlt%25[@(:template defaults:)@]%0a(:cell:)%0a(:cell:)Standardoptionen, die in dem Seitenlistenkommando benutzt werden%0a(:cellnr:)%25pmhlt%25[@(:template each:)@]%0a(:cell:)%0a(:cell:)Bezeichnet den wiederholten Teil%0a(:cellnr:)%25pmhlt%25[@(:template none:)@]%0a(:cell:)%0a(:cell:)wird verwendet, wenn keine Übereinstimmung gefunden wurde%0a(:tableend:)%0a[[#specialreferencesend]]%0a''Anmerkung'': Die Markups in der mittleren Spalte sind veraltet%0a-%3cSiehe auch [[PageVariables#specialreferences|Spezielle Referenzen in Seitenvariablen]].%0a%0a!! Spezielle Markups für Seitenlistenvorlagen%0aSeitenlistenvorlagen können spezielle Abschnitte haben,%0a* %25pmhlt%25[@(:template first ...:)@] und [@(:template ! first ...:)@],%0a* %25pmhlt%25[@(:template last ...:)@] und [@(:template ! last ...:)@],%0aum die Ausgabe für die erste oder letzte Seite in der Gruppe zu bezeichnen (benutze @@!first@@ und @@!last@@ für die Ausgabe aller Seiten ''außer'' der erste/letzte Seite).%0a%0aEs gibt auch ein%0a* %25pmhlt%25[@(:template defaults ...:)@], %0a  damit eine Vorlage die Standardoption angeben kann,%0a* %25pmhlt%25[@(:template each ...:)@],%0a  um den wiederholten Teil zu bezeichnen und %0a* %25pmhlt%25[@(:template none:)@],%0a  dessen Inhalt erscheint, wenn keine Seite gefunden wurde (ab Version 2.2.5).%0a%0aDiese erlauben Seitenlistenvorlagen einfach in Abschnitte aufzuteilen, die eingeschlossen oder nicht eingeschlossen werden in die Ausgabe, basierend auf einer Vielfalt von Bedingungen. Diese sind erweiterte Versionen der%25pmhlt%25 [@(:if ...:)@]-Bedingungen, die traditionell benutzt wurden, um die Seitenlistenausgabe zu steuern (trotzdem funktionieren die [@(:if:)@]-Bedingungen nach wie vor). %0a%0a!!!First, Each, Last, None%0a%0aDie einfachsten Versionen der Direktiven sind:%0a%0a-> %25pmhlt%25[@%0a(:template first:)      # Markup, das nur für die erste Seite angezeigt wird%0a(:template ! first:)    # Markup, das für jede Seite außer der ersten angezeigt wird%0a(:template each:)       # Markup, das für jede Seite der Liste angezeigt wird%0a(:template last:)       # Markup  das nur für die letzte Seite angezeigt wird%0a(:template ! last:)     # Markup, das für jede Seite außer der letzten angezeigt wird%0a(:template none:)       # Markup, das nur angezeigt wird, wenn keine Seite gefunden wurde@]%0a%0aEine Seitenlistenvorlage kann also Folgendes festlegen%0a%0a->%25pmhlt%25[@(:template first:)%0aSeiten in der Liste:%0a(:template each:)%0a* [[{=$FullName}]] [-{=$:Summary}-]%0a(:template last:)%0a{$$PageCount} Seiten angezeigt.@]%0a%0aZusätzlich können die "first"- und "last"-Optionen weitere Argumente enthalten, die die Kontrolle unterbrechen, wenn etwas für die erste oder letzte Seite eines Kontrollabschnitts erledigt werden soll. Wenn zum Beispiel etwas ausgegeben werden soll beim Erreichen der ersten oder letzten Seite einer Gruppe, schreibt man:%0a%0a->%25pmhlt%25[@(:template first {=$Group}:)%0a(:template last {=$Group}:)@]%0a%0aAnstatt also Kontrollunterbrechungen zu schreiben, die die (:if:)-Direktive benutzen, wie diese:%0a%0a->%25pmhlt%25[@(:if ! equal {%3c$Group} {=$Group}:)%0aGruppe: {=$Group}%0a(:ifend:)%0a* [[{=$FullName}]]@]%0a%0aschreibt man nun:%0a%0a->%25pmhlt%25[@(:template first {=$Group}:)%0aGruppe: {=$Group}%0a(:template each:)%0a* [[{=$FullName}]]@]%0a%0a[[PmWikiDe/Page text variables|+]] und [[PmWikiDe/page variables|+]] können ebenso benutzt werden, zum Beispiel%0a->%25pmhlt%25[@(:template default $:Maintainer=- order=$Maintainer,name:)%0a(:template first {=$:Maintainer}:)%0a@]%0a%0a!!!Standardoptionen%0a%0aZusätzlich kann eine Vorlage Standardoptionen festlegen, die in Seitenlistenkommandos genutzt werden. Zum Beispiel würde eine Vorlage, die von einer Liste von Seiten die Titel ausgibt (und diese nach den Titeln sortiert), so geschrieben werden:%0a%0a->%25pmhlt%25[@[[#bytitle]]%0a(:template defaults order=title:)%0a* [[{=$FullName}|+]]%0a[[#bytitleend]]@]%0a%0aDann schreibt der Autor %25pmhlt%25[@(:pagelist fmt=bytitle:)@] und die Seiten würden automatisch nach Titeln sortiert, ohne das er @@"order=title"@@ als Option in der [@(:pagelist:)@]-Direktive angeben musste.%0a%0aUm mehrere Parameter für eine Option anzugeben, umschließt man sie mit doppelten Anführungszeichen, z.&nbsp;B. zum Sortieren nach einer [[page text variables|+]] und dann nach den Seitennamen%0a-> %25pmhlt%25[@ (:template defaults order="$:Database,name" :) @]%0a%0a!!!Beispiele%0a%0a:%25pmhlt%25[@(:template defaults ... :)@]   :  Standardoption für Seitenlisten, die diese Vorlage benutzen%0a:%25pmhlt%25[@(:template each:)@]            :  Markup-Ausgabe für jede Seite der Seitenliste%0a:%25pmhlt%25[@(:template first:)@]           :  Markup-Ausgabe nur für die erste Seite in der Seitenliste%0a:%25pmhlt%25[@(:template last:)@]            :  Markup-Ausgabe nur für die letzte Seite in der Seitenliste%0a:%25pmhlt%25[@(:template first {=$Group}:)@] :  Markup-Ausgabe nur für die Seite, für die der Wert von $Group sich gerade geändert hat%0a:%25pmhlt%25[@(:template last {=$Group}:)@]  :  Markup-Ausgabe nur für die Seite, für die der Wert von $Group sich mit der nächsten Seite ändern wird%0a%0aAlso haben wir:%0a%0a->%25pmhlt%25[@[[#template]]%0a(:template defaults order=name:)%0a(:template first:)%0aPages ordered by group%0a(:template first {=$Group}:)%0a%0aPages in group [[{=$Group}/]]%0a(:template each:)%0a* [[{=$FullName}]]%0a(:template last {=$Group}:)%0a   {=$Group} contains {$$GroupPageCount} pages.%0a(:template last:)%0a   {$$PageCount} pages total.%0a[[#templateend]] @]%0a%0a[[#additionalpagevariables]]%0a!! Zusätzliche Seitenvariablen für Seitenlistenvorlagen%0aZusätliche [[Page Variables|+]], die nur während der Seitenlisten erreichbar sind:%0a->%25pmhlt%25[@%0a{$$PageCount}       Die aktuelle Seitenzählung für diese Iteration%0a{$$GroupCount}      Die aktuelle Gruppenzählung für diese Iteration%0a{$$GroupPageCount}  Die aktuelle Seitenzählung innerhalb der Gruppe für diese Iteration%0a{$$EachCount}       Die aktuelle Seitenzählung innerhalb der aktuellen Schleife%0a{$$option}          Die Werte des Arguments 'option' von (:pagelist:)@]%0a%0a%25pmhlt%25[@{$$EachCount}@] steigt mit jeder Seite der Seitenliste und wird zurückgesetzt, wenn ein [@(:template first {=$Property}:)@]- oder ein [@(:template last {=$Property}:)@]-Abschnitt ausgegeben wird. Das kann nützlich sein, wenn eine Seitenliste nach einer Seiten(text)variablen oder einer anderen Eigenschaft sortiert ist, und die Seiten mit der gleichen Eigenschaft gruppiert werden sollen. Wenn die Sortierung [@$Group@] und die Eigenschaft "[@{=$Group}@]" ist, sind [@{$$EachCount}@] und [@{$$GroupPageCount}@] das Gleiche (Siehe [[https://www.pmwiki.org/wiki/Test/EachCount|Test/EachCount]] für Beispiele). %0a%0aGebrauch von %25pmhlt%25[@{$$''option''}@]: zum Beispiel gibt [@{$$trail}@] den Seitennamen zurück, der in die @@trail=@@-Option der Seitenlisten-Direktive [@(:pagelist trail=...:)@] eingegeben wurde. Sie können eigene "Optionen" mit keinem anderen Zweck als in der Seitenliste angezeigt zu werden. %0a%0a[[#redirect]]%0a!! Redirect %0a%0aUm die Suche nach Seiten zu ermöglichen, die nur genau eine Seite zurückliefern, und um dann anschließend gleich automatisch zu dieser Seite zu springen, fügt man das Folgende zur Seitenlistenvorlage hinzu, in der diese "Springe zu der Seite"-Funktionalität gewünscht ist:%0a%0a-> %25pmhlt%25[@(:template last:)%0a(:if equal {$$PageCount} 1:)(:redirect {=$FullName}:)(:ifend:)@]%0a%0a[[#closure]]%0a!! Abschließen von Markups%0aAlle offenen Tabellen, Divs oder sonstigen Strukturen im Inneren von %25pmhlt%25[@(:pagelist:)@] werden standardmäßig am Ende des Seitenlistenkommandos geschlossen. Mit anderen Worten, [@(:pagelist:)@] benimmt sich, als sei es eine komplette eigene Seite,  %0aals sei sie eben nicht dazu da, Markups zu produzieren, die dann in eine einschließende Seite eingebettet werden.%0a%0a%25pmhlt%25So wird z.&nbsp;B. eine Tabelle, die mit einer  [@(:cell:)@]-Direktive im ersten [@(:pagelist:)@]-Kommando erzeugt wurde, am Ende dieser Seitenliste automatisch geschlossen. Die [@(:cell:)@]-Direktive im nächsten [@(:pagelist:)@]-Kommando startet dann eine neue Tabelle.%0a%0aAnmerkung: Nicht die %25pmhlt%25@(:table:)@]-Direktive öffnet eine Tabelle, es ist die [@(:cell:)@]- oder [@(:cellnr:)@]-Direktive, die das tut. Die [@(:table:)@]-Direktive ist dazu da, um ein paar Attribute für die dann folgende Tabelle setzen.%0a%0a!! Einsatz%0aEs ist ratsam, die Seite [[Site.PageListTemplates]] nicht direkt zu verändern, so dass Sie weiterhin von Upgrades profitieren.%0aStattdessen sollten Sie die betreffende Vorlage in Ihre [[Site.LocalTemplates]][==]-Seite kopieren und dort verändern (und umbenennen). Die Seite ''Site.LocalTemplates'' ist nicht Teil der PmWiki-Distribution und muss ggf. erst angelegt werden. Cookbook:PagelistTemplateSamples enthält viele Beispiele, wie Sie Seitenlistenformate an Ihre eigenen Bedürfnisse anpassen können.%0a%0a!! Weitere Rezepte%0aZusätzlich gibt es in den [[(Cookbook:)Cookbook|Kochbüchern]] weitere Rezepte für besondere [@fmt=@]-Optionen, einschließlich  [[Cookbook:DictIndex | [@fmt=dictindex@] ]] (alphabetischer Index) und [[Cookbook:SimpleForum | [@fmt=forum@] ]] (Forumsbeiträge).%0a%0a
time=1682920621
title=Seitenlistenvorlagen
