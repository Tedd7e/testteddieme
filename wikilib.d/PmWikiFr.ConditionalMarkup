version=pmwiki-2.2.30 ordered=1 urlencoded=1
author=Petko
charset=UTF-8
csum=
ctime=1143846615
description=Balises de condition permettant d'afficher ou de cacher des sections de la page.
name=PmWikiFr.ConditionalMarkup
rev=12
targets=PmWikiFr.DocumentationIndex
text=(:title Affichage conditionnel:)(:description Balises de condition permettant d'afficher ou de cacher des sections de la page.:)%0a!! Utilisation de la directive [=(:if:)=]%0aLa directive [@(:if:)@] permet à certaines portions de la page d'être incluses ou exclues du traitement.%0aLa forme générique de la directive [@(:if:)@] est%0a%0a-> [@(:if cond param:) contenu (:ifend:)@]%0a-> [@(:if cond param:) contenu (:else:) contenu (:ifend:)@]%0a-> [@(:if cond param:) contenu (:elseif cond param:) contenu (:ifend:)@] %0a%0aoù "cond" est une condition à tester, et "param" est un paramètre ou autre argument du test. %0a%0a!!! Écriture raccourcie%0a%0aLa balise [@(:if:)@] termine automatiquement la précédente, et on peut utiliser [@(:if:)@] au lieu de [@(:ifend:)@] :%0a-> [@(:if cond1:) cond1 est vraie (:if:)@]%0a-> [@(:if cond1:) cond1 est vraie (:if cond2:) cond2 est vraie (:if:)@]%0aCette ligne ci-dessus est identique à :%0a-> [@(:if cond1:) cond1 est vraie (:ifend:)(:if cond2:) cond2 est vraie (:ifend:)@]%0a%0a!! Conditions prédéfinies%0a%0aLes conditions prédéfinies par défaut dans PmWiki sont:%0a%0a: [@(:if name NOMDEPAGE:)@] :\%0a     La page courante est nommée "NOMDEPAGE"%0a%0a: [@(:if group NOMDEGROUPE:)@] :\%0a     Le groupe courant est nommé "NOMDEGROUPE"%0a%0a: [@(:if auth ACTION NomDePage:)@] :\%0a     L'utilisateur peut effectuer telle ACTION pour la page NomDePage. \%0a     ACTION peut être : read, edit, upload, attr ou admin.\%0a     NomDePage est optionnel, s'il manque, il s'agit de la page en cours.%0a%0a: [@(:if authid:)@] :\%0a     L'utilisateur actuel est authentifié%0a%0a: [@(:if true:)@] :\%0a     Toujours inclure le texte%0a%0a: [@(:if false:)@] :\%0a     Toujours ''exclure'' le texte (pareil qu'un commentaire)%0a%0a: [@(:if attachments:)@] :\%0a     La page courante possède des fichiers joints%0a%0a: [@(:if date DATE1..DATE2]:)@] :\%0a     La date courante est comprise dans l'intervalle de DATE1 et DATE2.\%0a     (Les dates ont la forme yyyy-mm-dd ou yyyymmdd.)\\%0a     [@(:if date 2009-09-01:)@] vraie si c'est le 1er septembre 2009\\%0a     [@(:if date 20090901..:)@] vraie si c'est après le 1er septembre\\%0a     [@(:if date 20090901..20091231:)@] vraie si c'est entre 01/09 et 31/12%0a%0a: [@(:if enabled VARIABLE:)@] :\%0a     vraie si la variable PHP, ou variable dans local/config.php ou un dans module, est définie et non-zéro.%0a%0a: [@(:if equal "CHAÎNE1" "CHAÎNE2":)@] :\%0a     vraie si la CHAÎNE1 est égale à la CHAÎNE2%0a%0a: [@(:if match REG_EXPRESSION:)@] :\%0a     vraie si le nom de la page correspond à l'expression régulière%0a%0a: [@(:if exists NOMDEPAGE:)@] :\%0a     vraie si NOMDEPAGE existe%0a%0a: [@(:if action ACTION:)@] :\%0a     vraie si l'action actuelle est ACTION (peut être ''browse, edit, upload, diff, print, etc.'')%0a%0a%0aLes formes négatives de conditions fonctionnent également.%0a%0a: [@(:if !attachments:)@] :\%0a     Cette page ne possède pas de fichiers joints%0a%0a%0a: [@(:if ! name NOMDEPAGE:) 	@] :%0a: [@(:if name !NOMDEPAGE:) 	@] :%0a: [@(:if name -NOMDEPAGE:) 	@] :\%0a     Cette page n'est pas NOMDEPAGE%0a%0a%0a%0aN'importe quel [@(:if:)@] termine automatiquement le précédent, ainsi les balises peuvent être facilement empilées:%0a%0a%0a    [@(:if auth read:)* Vous pouvez lire%0a    (:if auth edit:)* Vous pouvez éditer%0a    (:if auth upload:)* Vous pouvez télécharger%0a    (:ifend:)@]%0a%0a!! Conditions imbriquées%0a%0aLes conditions peuvent être imbriquées (depuis version 2.2.beta 66).%0a%0aLes balises [@(:if:)@] imbriquées fonctionnent comme les blocs [@(:div:)@] imbriqués. Il est nécessaire d'ajouter un nombre aux if-else-endif correspondants :%0a->[@%0a(:if cond1:)%0a  cond1 est vraie%0a  (:if2 cond2:)%0a     cond1 et cond2 sont vraies%0a  (:else2:)%0a     cond1 est vraie, cond2 ne l'est pas%0a  (:if2end:)%0a(:else:)%0a  cond1 n'est pas vraie, cond2 est sans importance%0a(:ifend:)%0a@]%0a''Note: des espaces ont été ajoutés pour une meilleure lisibilité.''%0a%0a%0a!! Utiliser des Jokers (métacaractères)%0a%0aLe métacaractère [@*@] représente n'importe quel caractère, zéro, un ou plusieurs fois.%0aLe métacaractère [@?@] représente n'importe quel caractère, exactement une fois.%0a%0aCes deux "jokers" peuvent être utilisés avec les conditions @@name@@ et @@group@@ dans les balises conditionnelles. Ainsi,%0a%0a: [@(:if name Blog.2009* :)@] :\%0a     La page en cours est dans le WikiGroupe "Blog" et son nom commence par 2005.%0a%0a: [@(:if group PmWiki* :)@] :\%0a     Le groupe en cours est PmWiki, ou commence par PmWiki, par exemple PmWikiFr.%0a%0a: [@(:if name Profils.*,-Profils.Profils :)@] :\%0a     La page est dans le groupe Profils, mais n'est pas Profils.Profils%0a%0a%0a!! Expressions conditionnelles combinées%0a%0aLes conditions décrites dans cette page peuvent être combinées en expressions plus complexes avec les formes suivantes:%0a->[@%0a(:if expr EXPRESSION :)%0a(:if [ EXPRESSION ] :)%0a(:if ( EXPRESSION ) :)@]%0a%0aLes conditions sont combinées par des opérateurs booléens et des crochets. Dans le tableau suivant, A et B sont soit des conditions.%0a%0a>>indent%3c%3c%0a|| border=1 cellpadding=4 cellspacing=0 style='border-collapse:collapse;'%0a||! Expression ||! Operateur ||! Resultat ||%0a|| [@A and B@]\\%0a   [@A && B@] || ET || VRAIE si A et B sont vraies. ||%0a|| [@A or B@]\\%0a   [@A || B@] || OU || VRAIE si A ou B est vraie. ||%0a|| [@A xor B@] || OU exclusif || VRAIE si soit A, soit B est vraie, mais pas les deux. ||%0a|| [@! A@] || Négation || VRAIE si A n'est pas vraie. ||%0a>>%3c%3c%0a%0aExemple%0a: [@(:if [ name UnePage and group UnGroupe ]:)@] : \%0a    est équivalent à [@(:if name UnGroupe.UnePage:)@]%0a%0aNotes :%0a* Les espaces autour des opérateurs et des crochets sont obligatoires.%0a* Il n'y a pas de messages d'erreur en cas de fautes de syntaxe.%0a* Utilisez des parenthèses et non des crochets pour les conditions internes d'une expression complexe.%0a%0aL'expression suivante affichera le contenu seulement si l'utilisateur est administrateur, ou s'il est authentifié et la date est après le 2009-06-01 :%0a%0a->[@(:if [ auth admin || ( authid && date 2009-06-01.. ) ] :)@]%0a%0a%0a!! Créer des nouvelles conditions%0a%0aVoir [[Cookbook:ConditionalMarkupSamples]] (en anglais).%0a%0a----%0a%25trail%25%3c%3c|[[DocumentationIndex|+]]|>>%0a
time=1315669216
title=Affichage conditionnel
