version=pmwiki-2.3.4 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum=pm hlt, hlt php (+362)
ctime=1205996851
name=PmWikiDe.PageTextVariables
rev=30
targets=PmWikiDe.Name,PmWikiDe.FullName,Cookbook.InternationalPTVs,PmWiki.PageTextVariables-Talk,PmWikiDe.TextFormattingRules,PmWikiDe.PageDirectives,PmWikiDe.OtherVariables,PmWikiDe.PageVariables,PmWikiDe.PageListTemplates,PmWikiDe.IncludeOtherPages,PmWikiDe.PageLists,Site.PageListTemplates,Site.LocalTemplates,PmWikiDe.Functions,PmWikiDe.ConditionalMarkup
text=(:title Seiten-Text-Variablen:)%0a(:Summary: Beschreibt die Verwendung von im Text der Seiten verwendeten Variablen:)%0a(:Original_Page: PmWiki.{$Name}:)%0a(:Translation_Date: 2011-04-25:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Autoren (Fortgeschrittene):)%0a>>comment%3c%3c%0a[[#singleline]]%0a[-[[{=$FullName}|+]],-] \%0a[[#singlelineend]]%0a>>%3c%3c%0a%0aSeiten-Text-Variablen sind Stringvariablen, die in dem Wikitext einer Seite erzeugt werden. Sie werden automatisch auch anderen Seiten zugänglich gemacht, so dass sie dort verwendet werden können.\\%0aSeiten-Text-Variable haben einen Namen, der nur einfache Latin/Roman-(ASCII)-Zeichen, Ziffern, Bindestriche und Unterstriche enthält (reguläre STVs haben also keine Umlaute oder Zeichen mit Akzenten). Das ist eine Einschränkung für internationale Wikis (experimentelle Rezepte für internationale STV: [[Cookbook:InternationalPTVs]]).%0a%0a[[#defining]]%0a!! Definition von Seiten-Text-Variablen%0a%0aEs gibt drei Wege, Seiten-Text-Variablen zu definieren ([[PmWiki:PageTextVariables-Talk#new_patterns|weitere Muster]] [-(englische Beschreibung)-] können bei Bedarf definiert werden):%0a%0a* Verwenden Sie eine  [[TextFormattingRules#DefinitionLists |Definitionsliste]] - das normalen Wiki-Markup für eine Definitionsliste erzeugt eine Seiten-Text-Variable.%0a(:markup caption='Beispiel einer Definitionslliste:' class="horiz":)%0a:Name: Crisses%0a"{$:Name}"%0a(:markupend:)%0a->Das erzeugt in der Seite eine neue Variable, auf die mit %25pmhlt%25[@{$:Name}@] (wird zu "Crisses") zugegriffen werden kann.%0a%0a* Verwenden Sie einen einfachen Doppelpunkt als Trenner in einem normalen Text. %0a(:markup caption='Beispiel für Doppelpunkt als Trenner:' class="horiz":)%0aAdresse: 1313 Mockingbird Lane%0a%0a"{$:Adresse}"%0a(:markupend:)%0a->Das erzeugt in der Seite die %25pmhlt%25[@{$:Adresse}@]-Variable (Variablen-Markup wird zu "{$:Adresse}").%0a%0a* Verwenden Sie eine versteckte [[PmWikiDe/PageDirectives | Direktiven]][=-=]Form &ndash; ein PmWiki-Markup, das zwar nicht auf der Seite erscheint, aber dennoch eine Variable definiert.%0a(:markup caption='Beispiel für eine Direktive:' class="horiz":)%0a(:Land: Transylvania :)%0a"{$:Land}"%0a(:markupend:)%0a->Das erzeugt in der Seite die %25pmhlt%25[@{$:Land}@]-Variable (Variablen-Markup wird zu "{$:Land}").%0a->%0a[[#default]]%0a!! Standardwerte zum Leeren oder Zurücksetzen [-von Seitentextvariablen-]%0aWenn eine Seitentextvariable nicht [[#defining|in einer Seite definiert]] wurde oder wenn der Besucher der Seite kein Leserecht für die Seite hat, die die Variablendefinition enthält, gibt das Markup für den Zugriff auf die Variable wie %25pmhlt%25[@{$:Country}@] eine leere Zeichenkette zurück.%0a%0aEin Administrator kann einen Standardwert für solche Fälle definieren (PmWiki 2.2.121+). Das folgende Array kann in der ''local/config.php''-Datei definiert werden:%0a%0a%25hlt php%25[@  $DefaultUnsetPageTextVars = array(%0a    'SpezifischeVariable' => 'SpezifischeVariable is unset',%0a    '*PartialMatch*' => 'some value',%0a    '*' => '(unset)',%0a  );@]%0a  %0a%25hlt php%25[@  $DefaultEmptyPageTextVars = array(%0a    'SpezifischeVariable' => 'SpezifischeVariable is set, but empty',%0a    '*' => '(empty)',%0a  );@]%0a%0aIn dem obigen Beispiel geben die %25pmhlt%25[@{$:SpezifischeVariable}@] oder die [@{AndereSeite$:SpezifischeVariable}@] einen vordefinierten Wert zurück:%0a* den in $DefaultUnsetPageTextVars definierten Wert, wenn die Variable in dem Seitentext nicht definiert wurde oder wenn der Besucher der Seite kein Leserecht für AndereSeite hat, %0a* den in $DefaultEmptyPageTextVars definierten Wert, wenn der Besucher Leserecht hat und die Variable definiert, aber leer, ist, z.&nbsp;B. %25pmhlt%25[@(:SpezifischeVariable::)@] (zwischen den letzten beiden Doppelpunkten steht nichts). %0a%0aDie Muster werden der Reihe nach abgeglichen und die erste Übereinstimmung bestimmt den Wert, der der Variablen zugewiesen wird. Der Stern %25pmhlt%25[@*@] passt auf jede Zeichenkette. In dem obigen Beispiel gibt eine undefinierte Variable, die weder auf 'SpezifischeVariable' noch auf '*PartialMatch*' passt, den Wert '(unset)' aus.%0a%0a[[#usage]]%0a!! Verwendung%0a[[#usagesamepage]]%0a!!! Verwendung auf der gleichen Seite%0a%0aAuf der gleichen Seite können Sie die Seiten-Text-Variable einfach durch das %25pmhlt%25[@{$:Var}@]-Format auflösen (wie oben gezeigt). %0a%0a[[#specialreferences]]%0a!!! Verwendung in Headern und Footern: besondere Verweise%0a%0aWenn Sie aus einem GroupHeader, GroupFooter, einer SideBar, etc. heraus eine Seiten-Text-Variable der Hauptseite aufrufen möchten, müssen Sie besondere Verweisinformationen einschließen.%0aUm ausdrücklich die Seiten-Text-Variable der dargestellten Hauptseite aufzurufen, stellen Sie dem Markup für die Seiten-Text-Variablen ein Sternchen voran:%25pmhlt%25 [@{*$:Adresse}@] in der GroupFooter- oder GroupHeader-Seite.%0a(:markup caption='Beispiel' class=horiz:)%0a{*$:Land}\\%0a{{*$Group}/PmWiki$:Summary}%0a(:markupend:)%0aUm in der Hauptseite eine Variable aus dem Header oder Footer aufzurufen, siehe unten ([[#usageotherpage |Verwendung anderer Seiten]]).%0a-%3c Besondere Verweise wirken auch auf [[page variables(#specialreferences)|+]] und  [[PmWikiDe/page list templates(#specialreferences)|+]].%0a%0a[[#usageotherpage]]%0a!!! Verwendung anderer Seiten%0a%0aWenn Sie Daten aus einer anderen Seiten herausziehen wollen, verwenden Sie das %25pmhlt%25[@{Group/PageName$:Var}@]-Format.%0a(:markup caption='Beispiel:' class="horiz":)%0aSuburb: Khandallah%0a(:Lake:Taupo:)%0a:Mountain:Mt Ruapehu%0a%0a->"{PageTextVariables$:Suburb}"%0a->"{{$FullName}$:Lake}"%0a->"{PmWikiDe/PageTextVariables$:Mountain}"%0a(:markupend:)%0a%0a[[#usageincludedpage]]%0a!!! Verwendung auf eingebundenen Seiten (included pages)%0aSeiten-Text-Variablen werden niemals zusammen mit ihrem Quelltext [[IncludeOtherPages"Einbinden anderer Seiten"|eingebunden]]. %0aSiehe [[#usageotherpage|Verwendung anderer Seiten]] oben, um auf Seiten-Text-Variablen aus anderen Seiten zu verweisen.%0a%0a[[#pagelists]]%0a!!! Verwendung mit Seitenlisten%0a%0aAuch [[Page lists|+]] können auf die Seiten-Text-Variablen zugreifen:%0a(:markup caption='Beispiel:' class="horiz":)%0a(:pagelist group=PmWikiDe order=$:Summary count=6 fmt=#singleline:)%0a(:markupend:)%0a%0aUnd um Seitenlisten zu erzeugen ( wie die in  [[Site.Page List Templates]], [[PmWikiDe/Page Lists|+]], [[PmWikiDe/Page List Templates|+]], [[PmWikiDe/Page Variables|+]] beschriebenen), speichern Sie angepasste Seitenlisten in [[Site.Local Templates]].%0a%0a%0a[[Page lists|+]] können Seiten-Text-Variablen nutzen, um Seiten auszuwählen:%0a(:markup caption='Beispiel:' class="horiz":)%0a(:pagelist group=PmWiki $:City=Paris count=8 fmt=#singleline order=-name:)%0a(:markupend:)%0a->listet Seiten auf, die '$:City' auf 'Paris' gesetzt haben.%0a%0a(:markup caption='Beispiel: Mehrfachauswahl mit Leerzeichen' class="horiz":)%0a(:pagelist group=PmWiki $:City="Addis Abeba,Paris" order=-$:Version count=8 fmt=#singleline:)%0a(:markupend:)%0a->'Anführungszeichen' müssen die ''ganze'' Auswahl umschließen.%0a%0a* Wenn Sie Seiten-Text-Variablen zum Auswählen oder Sortieren nutzen, setzen Sie keine geschweiften Klammern um den Variablennamen. Die geschweifte Form nimmt eine Ersetzung vor bevor das Seitenlisten-Kommando ausgewertet wird.%0a* Verweisquelltext innerhalb des Inhalts einer versteckten Seiten-Text-Variablen (im Gegensatz zu den anderen Arten, STVn anzugeben), wird nicht als Verweis in der Seite verwahrt. Dadurch wird der Verweis nicht sichtbar durch die Seitenlistenoption 'link='. Wenn Sie den Verweis durch 'link=' angezeigt bekommen wollen, dürfen Sie im Quelltext keine Direktive benutzen, um die Variable anzulegen, oder setzen Sie den Verweis in die Seite und verbergen Sie ihn ggf. durch eine false-Bedingung: \\%0a%25pmhlt%25[@(:Linkme: [[PageToLink]]:) (:if false:){$:Linkme}(:ifend:)@] %0a%0aDer Seiten-Text-Variablen-Wert ist immer der Text, der in die Seite geschrieben wurde. Der wird erst ausgewertet, wenn die Variable gedruckt/ausgegeben wird als HTML. Beim Sortieren nach einer Seiten-Text-Variablen sind all die Werte in allen Seiten die noch nicht ausgewerteten Text-Strings und die Seitenlisten-Sortierfunktion tut was sie kann damit. Sie wertet den Text an dieser Stelle nicht aus. %0a%0aZ.&nbsp;B. ist es mit einem Seitennamen in der Form "jjjjMonat" einfacher, eine @@Seiten-Variable@@ zu benutzen, die in @@config.php@@ bestimmt wurde, anstelle einer @@Seiten-Text-Variablen@@:%0a-> %25hlt php%25[@  $FmtPV['$NameToYearMonth'] = '[[PmWikiDe/Functions#PSFT|PSFT]]("[=%25Y%25m=]", strtotime($name))';@]%25%25 # siehe $FmtPV und [[PmWikiDe/Functions#PSFT|PSFT]]%0aBenutzen Sie dann %25pmhlt%25[@(:pagelist order=$NameToYearMonth:)@]%0a%0aAlternativ schreiben Sie in die Wikiseite:%0a-> %25pmhlt%25[@(:MonthNum:07:)@]%0ada der folgende Markup-Ausdruck nicht funktionieren wird:%0a-> %25pmhlt%25[@(:MonthNum:{(ftime fmt=%25m when="{$Namespaced}")}:)@]%0a%0a[[#set]]%0a!!! Prüfen auf gesetzt oder nicht%0a[- STV = Seiten-Text-Variable -]%0a|| border=0 cellpadding=4 rules=all%0a|| '''=-'''    ||STV ist gesetzt (ist nicht leer), z. B. %25pmhlt%25[@(:pagelist $:Var=- :)@] ||%0a|| '''=-?*'''  ||STV ist nicht gesetzt (ist leer), d. h. nicht ein Zeichen gefolgt von 0 oder mehr Zeichen, z. B. %25pmhlt%25[@(:pagelist $:Var=-?* :) @] ||%0a|| '''=*'''    ||zeige ''alle'' Seiten, unabhängig von der Seiten-Text-Variablen (langsam) ||%0a|| '''=-*'''   ||zeige ''keine'' Seiten, unabhängig von der Seiten-Text-Variablen (langsam) ||%0a%0a[-Tip :%25pmhlt%25 [@(:if ! equal "{$:STV}" "":)@] testet, ob STV leer bzw. nicht gesetzt ist oder nicht.-]%0a%0a(:markup caption='Beispiel: Seiten ohne eine Zusammenfassung (Summary)' class="horiz":)%0a(:pagelist group=PmWikiDe $:Summary=-?* count=6  fmt=#singleline:)%0a(:markupend:)%0a%0a[[#templates]]%0a!!! Verwendung von Seiten-Text-Variablen in einer Vorlage (Template)%0aZeige Seiten an, sortiert nach Zielgruppen-(Audience)-Seiten-Text-Variable%0a%0a(:markup caption='Beispiel:' class="horiz":)%0a>>comment%3c%3c%0a[[#byaudience]]%0a(:if ! equal '{=$:Audience}' '{%3c$:Audience}':)%0a-%3c'''{=$:Audience}''':  %0a(:ifend:)%0a[[{=$Name}]]%0a[[#byaudienceend]]%0a>>%3c%3c%0a(:pagelist group=PmWikiDe count=10 fmt=#byaudience order=-$:Audience:)%0a(:markupend:)%0a%0a[[#conditionals]]%0a!!! Verwendung von Seiten-Text-Variablen in [[PmWikiDe/conditional markup|bedingten Textauszeichnungen]]%0a%0aSeiten-Text-Variablen (STV) werden zugewiesen/ausgewertet, '''bevor''' irgendeine bedingte Textauszeichnung ausgewertet wird. Das bedeutet effektiv, dass Sie keine STV innerhalb einer if...else-Bedingung deklarieren können; und ebenso, dass eine STV einen Wert hat, selbst wenn sie in einer%25pmhlt%25 [@(:if false:)....(:if:)@]-Bedingung gesetzt wurde.%0a%0a%0a[[#withincode]]%0a!!! Verwendung innerhalb von Kode (nur für Entwickler)%0a%0aDie Standard-%25hlt php%25[@PageVar($pagename,$varname)@]-Function kann Seiten-Text-Variablen zurückgeben, aber denken Sie daran, Dollarzeichen und Doppelpunkt hinzuzufügen wie hier:%0a%0a->%25hlt php%25[@$var=PageVar($pagename,'$:City')@]%0a%0aDas funktioniert, indem sie alle Seiten-(Text-)Variablen, die sie in einer Seite findet, zwischenspeichert (in @@$PChache@@) und die Verlangte zurückgibt.%0a
time=1651053690
title=Seiten-Text-Variablen
