version=pmwiki-2.2.35 ordered=1 urlencoded=1
author=simkin
charset=UTF-8
csum=minor corrections
ctime=1318580860
name=PmWikiCa.IncludeOtherPages
rev=3
targets=PmWikiCa.Links,PmWikiCa.WikiGroup,PmWikiCa.PageTextVariables,PmWiki.IncludeOtherPages-Talk,Cookbook.IncludeSection,Site.PageListTemplates,Cookbook.IncludeUrl,PmWikiCa.WikiStyles,PmWikiCa.ConditionalMarkup,PmWikiCa.PageVariables,PmWikiCa.WikiAdministrador,PmWikiCa.PageLists
text=(:Title Inclusió d'altres pàgines:)%0a(:Summary: Incloure els continguts d'altres pàgines de PmWiki:)%0a(:Audience: autores (intermedi) :)%0aLa directiva [@(:include:)@] possibilita la inserció (o ''[[Wikipedia:Transclusion|"transclusió"]]'') dels continguts d'altres pàgines a la pàgina actual.  Totes les directives de sota executen una inclusió directa.  En concret, si no s'indica el contrari, s'assumeix que qualsevol [[links|enllaç]] del text inclòs enllaça amb pàgines del [[wiki group|grup wiki]] actual.%0a%0a!! Sintaxi%0aLa sintaxi bàsica és%0a* [=(:=]include `NomPagina:)%0a-> usant `NomPagina s'inclou la totalitat d'eixa pàgina (del mateix grup).%0a* [={Grup/NomPagina$:=][[#includeptv|PTVar]]}%0a-> inclou una [[PageTextVariables|variable]] d'una pàgina, on [[WikiGroup|Grup]] i `NomPagina són opcionals%0a%0aLa sintaxi completa és%0a* [=(:=]include%0a  [[#includefullname|NomComplet]]#[[#includeanchor|ancora-inici]]#[[#includeanchor|ancora-fi]] \%0a  [[#includelines|lines]]=''123'' \%0a  [[#includeself|self]]=''0''  \%0a  [[#includebasepage|basepage]]=''abc'' \%0a  [[#includevariable|variable]]=''valor'' \%0a  :)%0a-> inclou una pàgina d'acord amb els paràmetres proporcionats. Els paràmetres són opcionals.%0a[[#firstanchor]]%0a%0a!! Paràmetres%0aLa directiva pot tenir múltiples paràmetres ''`NomPagina'' amb o sense àncores, i múltiples [[#includevariable|variables]].%0a%0a[[#includefullname]]%0a!!! Les pàgines especificades%0a-%3c [@(:include NomPagina:)@]%0a-%3c [@(:include Grup.NomPagina:)@]%0a-%3c [@(:include Pagina1 Pagina2 Grup1.Pagina3 Grup2.Pagina4:)@]%0a-> Totes tres inclouen a dintre de la pàgina actual el text complet de la pàgina especificada. S'hi poden especificar múltiples pàgines, però només s'inclourà la primera disponible.%0a%0a[[#errormessage]]%0aPodeu usar la característica citada a dalt per a '''mostrar un missatge d'error en cas de que la inclusió falli''. Creeu una pàgina, p.ex. `Site.IncludeFailed que contingui el missatge d'error. Podeu usar qualsevol nom per a la pàgina. Després afegiu-la al final de la llista de pàgines de l[='=]''include'':%0a [=(:include Pagina1 Pagina2 Pagina3 Site.IncludeFailed:)=]%0aUna aproximació lleugerament més complicada s'explica a [[PmWiki:IncludeOtherPages-Talk|la pàgina de discussió]].%0a%0a[[#includeanchor]]%0a!!! Àncores%0a|| width=*%0a||[@(:include NomPagina#desde#fins:)@] ||inclou les línies entre les [[Links#anchors|àncores]] [@[[#desde]]@] i [@[[#fins]]@] de la pàgina ''`NomPagina''%0a||[@(:include NomPagina#desde#:)@]   ||inclou totes les línies des de l'àncora [@[[#desde]]@] fins al final de la pàgina%0a||[@(:include NomPagina##fins:)@]     ||inclou totes les línies des de l'inici de la pàgina fins a l'àncora [@[[#fins]]@]%0a||[@(:include NomPagina#desde:)@]    ||ho inclou tot entre [@[[#desde]]@] i la següent àncora%0a||[@(:include NomPagina#:)@]        ||ho inclou tot des de l'inici de la pàgina fins a la primera àncora%0a-> %25note%25 '''Nota:''' no s'han de ficar espais entre "#desde" i "#fins".%0a%0a-> %25note%25 '''Nota:''' el text que és en la mateixa línia que l'ancora [@[[#fins]]@]] '''NO''' s'inclourà al text, fins i tot si precedeix l'àncora.  Per xemple:%0a--> [@[[#desde]]algunes paraules a la primera línia@]%0a--> [@algunes paraules més a l'última línia [[#fins]]@]%0a-> %25note%25 Quan s'incloguen les línies de dalt amb [@(:include NomPagina#desde:)@] es mostrarà el text de la primera línia però no el de l'última.%0a%0a-%3c [@(:include Pagina1 Pagina2 #desde#fins:)@]%0a-> Inclou els continguts entre [@[[#desde]]@] i [@[[#fins]]@] de la primera pàgina disponible, bé sigui Pagina1 o Pagina2.%0a-> %25note%25 '''Nota:''' cal ficar un espai entre "Pagina2" i "#desde#fins". Les mateixes àncores "#desde#fins" haurien d'estar presents a ambdós pàgines. Si no es troben les àncores indicades a la primera de les pàgines disponibles (bé Pagina1 o bé Pagina2), aleshores s'inclouran tots els continguts de la pàgina.%0a-> %25note%25 Açò no funciona correctament ara per ara (versió 2.2.33). Podeu trobar una solució a Cookbook:IncludeSection.%0a%0a-%3c [@(:include Pagina1#desde1#fins1 Pagina2#desde2#fins2:)@]%0a-> Inclou els continguts de la primera pàgina disponible, bé sigui Pagina1 (entre [@[[#desde1]]@] i [@[[#fins1]]@]) o bé sigui Pagina2 (entre [@[[#desde2]]@] i [@[[#fins2]]@] ) %0a%0a-%3c %25note%25 '''Nota:''' Les versions anteriors de PmWiki, sense voler, permetien espais en blanc entre les àncores [@#desde@] i [@#fins@].  Les versions més noves ja no ho permeten.  Per a tornar a habilitar aquest comportament "no-desitjat" afegiu açò al fitxer ''config.php'' o ''farmconfig.php'':%0a%0a-> [@Markup('includeanchors', '%3cinclude', '/(\\(:include.*?#\\w+)\\s+(#\\w+)/', '$1$2');@]%0a%0a[[#includelines]]%0a!!! Lines=%0a-%3c [@(:include NomPagina lines=10:)@]%0a-%3c [@(:include NomPagina lines=5..10:)@]%0a-%3c [@(:include NomPagina lines=5..:)@]%0a-> Inclou les primeres 10 línies, les línies 5 a 10, o de la línia 5 en avant de ''`NomPagina''. Una "línia" es refereix en aquest context a una lína de ''codi''. ''Per tant, una línia pot ser un paràgraf llarg (en la pantalla s'estén a més d'una línia), o una línia completament en blanc.''%0a%0a-%3c [@(:include Pagina1 Pagina2 Pagina3 lines=1..5:)@]%0a-> Inclou les primeres cinc línies de la primera pàgina disponible entre Pagina1, Pagina2, o Pagina3.  Per a incloure text de diverses pàgines, feu servir un [@(:include:]@] independent per a cada pàgina.%0a%0a[[#includeself]]%0a!!! Self=%0a-%3c [@(:include NomPagina self=0:)@]%0a-> El paràmetre @@self@@ pot prendre el valor @@0@@ o @@1@@. Indica si la directiva té permís per incloure la pàgina actual. És útil quan `NomPagina és una variable com ara bé [@{$Name}@] i voleu evitar que s'inclogui la pàgina actual.%0a%0a[[#includeptv]]%0a!!! [[Page text variables|+]]%0a-%3c [@{Grup/NomPagina$:Var}@]%0a-> Inclou valors d'una llista de definicions com a [[page text variables|variables de text]] des d'una pàgina (opcional). Aquestes es defineixen mitjançant una llista de definicions ([@:ítem:descripció@]), amb un caràcter de dos punts com a delimitador ([@ítem:descripció@]), o la marca especial ([@(:ítem:descripció:)@]).%0a%0a[[#includebasepage]]%0a!!!Basepage=%0a%0a-%3c [@(:include NomPagina basepage=NomPaginaBase:)@]%0a-> Inclou `NomPagina, però tractant tots els enllaços relatius i les variables de ''`NomPagina'' com a relatius a ''`NomPaginaBase''.%0aPer tant, si hom crea [@PlantillaNom@] com a %0a-> [@Nom: {$:Nom}%0aAdre&ccedil;a: {$:Adre&ccedil;a}@]%0aaleshores la directiva%0a-> [@(:include PlantillaNom basepage=NomPaginaBase:)@]%0arecuperarà els continguts de [@PlantillaNom@], tractant les variables de pàgina i els enllaços com si fossin relatius a [@NomPagina@].  %0aEn concret, els valors de [@{$:Nom}@] i [@{$:Adre&ccedil;a}@] s'agafaran de [@NomPagina@]; passaria el mateix amb altres variables com [@{$Title}@] i [@{$LastModifiedBy}@].%0a%0a!!!! Ús de ''basepage''%0aL'objectiu principal de ''basepage'' és permetre la inclusió de pàgines tal i com es feia en les versions 2.1.x, on les variables de pàgina i els enllaços s'interpretaven en relació a la pàgina mostrada.%0aAixò s'aconsegueix mitjançant:%0a-> [@(:include AlgunaAltraPagina basepage='' :)@]%0a  -o-%0a-> [@(:include AlgunaAltraPagina basepage={*$FullName} :)@]%0a%0aTambé permet que les pàgines [=GroupHeader i GroupFooter=] tractin les seues variables i enllaços de forma relativa a la pàgina que es mostra (enlloc de fer-ho en relació a [=GroupHeader i GroupFooter=]):%0a>>pre%3c%3c%0a  ## PmWiki default $GroupHeaderFmt setting%0a  $GroupHeaderFmt = %0a    [='(:include {$Group}.GroupHeader self=0 basepage={*$FullName}:)(:nl:)';=]%0a>>%3c%3c%0a%0aDe no ser així, l'ús de la variable {$Name} dintre de [=GroupHeader=] mostraria '[=GroupHeader=]' i no pas el nom de la pàgina mostrada.%0a%0aEl paràmetre @@basepage=@@ és suficientment general per a fer-se servir com a plantilla, de manera que pot agafar una pàgina --que fem servir com a plantilla-- que contingui variables i emplenar-les al moment amb els valors d'un altra pàgina:%0a->[@(:include PaginaPlantilla basepage=PaginaDades :)@]%0a%0aI, com sempre, una única `PaginaPlantilla pot contenir diverses plantilles delimitades per àncores, de manera que al final acabem amb una sintaxi misteriosament similar'^[[#footnote|#]]^' a la de les plantilles per als llistats de pàgines:%0a>>pre%3c%3c%0a    [@(:include PaginaPlantilla#abc basepage=PaginaDades :)@]%0a    (:include PaginaPlantilla#def basepage=PaginaDades :)%0a    (:include PaginaPlantilla#xyz basepage=PaginaDades :)%0a>>%3c%3c%0a%0aAixí que [=PaginaPlantilla=] pot usar una sintaxi com:%0a>>pre%3c%3c%0a    [@%0a    [[#abc]]%0a    ...ací van les coses de la plantilla...%0a    [[#abcend]]%0a    @]%0a>>%3c%3c%0a%0ai és possible mostrar [=PaginaPlantilla=] com una plantilla sense que s'interpreti... el mateix que fem amb [[Site.PageListTemplates]].%0a%0a%0a-%3c [[#footnote]] [- '^[1]^'D'acord, no és tan misteriós, ja que el codi de la plantilla de llistat de pàgines usa la mateixa funció que (:include:) per obtenir-ne les plantilles.  Però tot i això és una comparació útil. -]%0a%0a[[#includevariable]]%0a!!! Especificar les variables com a paràmetres%0aPodeu especificar valors per a les variables ''directament'' a la sentència d'inclusió, i fer referència a les variables des de la plantilla usant el format [@{$$variable1}@]:%0a-> [@(:include PaginaPlantilla variable1="valor" variable2="valor2":)@]%0a%0aAmb això assumim que el lloc té habilitat $EnableRelativePageVars, recomanat des de PmWiki 2.2.0 -- però deshabilitat per defecte en les versions 2.2.8 i anteriors.%0a%0aPer exemple, a la pàgina inclosa ("plantilla") puc tenir:%0a%0a(:markup class=horiz:)%0a[[#ivars]]%0aHola, {$$Nom}, com estàs avui?%0a[[#ivarsend]]%0a(:markupend:)%0a%0aAleshores, incloent eixa secció de dalt (disponible via @@[@{$FullName}#ivars)@]@@) obteniu aquest resultat:%0a%0a(:markup class=horiz:)%0a(:include {$FullName}#ivars Nom=Mariola:)%0a(:markupend:)%0a%0aSi el valor conté espais, tanqueu-lo entre cometes:%0a%0a(:markup class=horiz:)%0a(:include {$FullName}#ivars Nom="el meu amic":)%0a(:markupend:)%0a%0a''Vegeu també $EnableUndefinedTemplateVars.''%0a%0a!! Vegeu també%0a* [[Page text variables|+]] {PageTextVariables$:Summary}%0a* [[Cookbook:IncludeUrl]] {Cookbook.IncludeUrl$:Summary}%0a%0a!! Nota sobre l'ús d'estils%0aPer defecte, les pàgines o línies ''incloses'' no es poden distingir de qualsevol altre text de la pàgina. Per tal d'indicar visualment que aquest text és especial, podeu aplicar-hi [[Wiki Styles|+]]. Per exemple:%0a%0a(:markup:)%0a%25define=leftborder border-left="2px solid #88f" margin-left="2px" padding="1px 0 3px 10px"%25%0aQuè és PmWiki?%0a>>leftborder%3c%3c (:include PmWikiCa.PmWikiCa lines=1..4:) %0a>>%3c%3c%0a''Que tingueu un bon dia!''%0a(:markupend:)%0a%0a!!! Referències als paràmetres%0a%0aEs pot accedir a qualsevol paràmetre que se li passa a una sentència d'inclusió des de dintre de la pàgina inclosa com una variable especial [@{$$...}@] del mateix nom. Podem usar aquest funcionalitat per a mostrar informació extra a l'hora de mostrar la pàgina inclosa.%0a%0a!!! Notes%0a* També podeu usar [@(:include Meua/Pagina#meuaancora lines=4:)@] que comença, i inclou, la línia amb l'àncora [@[[#meuaancora]]@] i les tres línies següents.%0a%0a!! Notes sobre l'ús amb [[conditional markup|+]]%0aLa directiva [@(:include ...:)@] es processa després que s'avaluïn les sentències condicionals.\\%0aPer tant podeu incloure una pàgina o una secció com a part d'una condició, com per exemple%0a->[@(:if alguna condicio:)(:include AlgunaPagina#seccio:)(:ifend:) @] %0aPer contra, [@(:include AlgunaPagina#seccio:)@] no comprova si [@[[#seccio]]@] forma part d'una condició, com ara bé%0a->[@(:if alguna condicio:)[[#seccio]]...[[#seccioend]](:ifend:)@]%0a[@(:include AlgunaPagina#seccio:)@] ignorarà per complet la condició. %0a%0aQuan [[Conditional Markup|s'avaluen variables]] a les pàgines incloses, el context de la pàgina (font o objectiu) pot resultar útil.%0aVegeu [[PageVariables#specialreferences|referències especials]] per a més detalls.%0a%0a----%0a%0a>>faq%3c%3c [[#faq]]%0a%0aQ: [[#maxincludes]] Quin és el nombre màxim d'inclusions que poden haver a una pàgina? %0a%0aA: Per defecte, PmWiki estableix un límit de 50 inclusions de pàgina, per tal de prevenir l'aparició de bucles infinits o altres situacions que puguin acaparar els recursos del servidor. (Dos d'aquestes pàgines incloses són `GroupHeader i `GroupFooter.) Una [[wiki administrador|administradora]] pot modificar-lo mitjançant la variable $MaxIncludes.%0a%0aQ: Hi ha alguna manera d'incloure continguts des d'un grup de pàgines sense especificar el nom exacte, p.ex. entre l'àncora X i Y des de totes les pàgines anomenades SiClasse-* ?%0aA: Es pot fer mitjançant [[page lists|+]].%0a%0a%0aQ: Sembla que hi ha un problema de visualització quan la pàgina inclosa conté la directiva [=(:title:)=].%0aA: En la instal·lació per defecte, l[='=]''últim'' títol de la pàgina sobreescriu els anteriors, així que podeu col·locar la directiva [=(:title :)=] al final de la pàgina, després de totes les inclusions. Vegeu també $EnablePageTitlePriority.%0a
time=1321262256
title=Inclusió d'altres pàgines
