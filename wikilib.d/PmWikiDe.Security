version=pmwiki-2.3.7 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum= hlt php, pm hlt, https (+177)
name=PmWikiDe.Security
rev=25
targets=Category.Security,!Security,PmWikiDe.PageHistory,PmWikiDe.Passwords,PmWikiDe.PasswordsAdmin,PmWikiDe.AuthUser,PmWikiDe.UrlApprovals,PmWikiDe.SiteAnalyzer,PmWikiDe.Blocklist,PmWikiDe.Notify,PmWikiDe.SecurityVariables,PmWikiDe.UpgradeToSiteAdmin,Cookbook.Cookbook,Cookbook.HtpasswdForm,Cookbook.SecureAttachments,Cookbook.WebServerSecurity,Cookbook.FarmSecurity,Cookbook.DeObMail,Cookbook.SpamFilters,Cookbook.AuditImages,Cookbook.PrivateGroups,Cookbook.OnlyOneLogin,Cookbook.RecipeCheck,Cookbook.SessionGuard,Cookbook.TrackChanges,Cookbook.SwitchToSSLMode,PmWiki.ContactUs,PmWiki.SiteAnalyzer,Category.Spam,!Spam,PmWikiDe.DeletingPages,PmWikiDe.AvailableActions,Cookbook.DeleteAction,Cookbook.Captchas,Cookbook.Captcha,Site.AuthForm,Cookbook.LimitWikiGroups,Cookbook.LimitNewPagesInWikiGroups,Cookbook.AuthDNS,Cookbook.PersistentLogin,Profiles.HomePage,PmWikiDe.PathVariables,PmWikiDe.BasicVariables,PmWikiDe.Drafts,PmWikiDe.EditVariables,PmWikiDe.Uploads,PmWikiDe.UploadsAdmin,PmWikiDe.UploadVariables,Cookbook.OpenPass-Talk
text=(:title Sicherheit:)%0a(:Summary: Zeigt relevante Verweise zur Sicherheit:)%0a(:Original_Page: PmWiki.Security:)%0a(:Translation_Date: 2011-05-14:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Autoren (Fortgeschritten) und Administratoren:)%0a%0aEinzelne Aspekte zur Sicherheit ([[!security]]) von PmWiki sind auf den folgenden Seiten zu finden:%0a%0aDokumentationsseiten:%0a* [[Page history| +]]       &rarr; {PageHistory$:Summary}%0a* [[Passwords | +]]         &rarr; {Passwords$:Summary}%0a* [[PasswordsAdmin | +]]    &rarr; {PasswordsAdmin$:Summary}%0a* [[AuthUser]]              &rarr; {AuthUser$:Summary}%0a* [[UrlApprovals | +]]      &rarr; {UrlApprovals$:Summary}%0a* [[Site Analyzer | +]]     &rarr; {PmWikiDe.SiteAnalyzer$:Summary}%0a* [[Blocklist | +]]         &rarr; {Blocklist$:Summary}%0a* [[Notify | +]]            &rarr; {Notify$:Summary}%0a* [[SecurityVariables | +]] &rarr; {SecurityVariables$:Summary}%0a* [[UpgradeToSiteAdmin | +]]&rarr; {UpgradeToSiteAdmin$:Summary}%0a%0a[[Cookbook(:/) | Kochbuch]]-Seiten (nur auf Englisch verfügbar):%0a* [[Cookbook:Cookbook#Security | Cookbook-Index: Sicherheit]]%0a* [[Cookbook:HtpasswdForm]] &rarr; Formularbasiertes Management von Benutzern und Passwörtern durch Benutzung von .htpasswd/.htgroup-Dateien%0a* [[Cookbook:Secure attachments]] &rarr; Schützen hochgeladener Anhänge%0a* [[Cookbook:WebServerSecurity]] &rarr; Schutz des Servers durch .htaccess%0a* [[Cookbook:FarmSecurity]] &rarr; Schutz von Farminstallationen%0a* [[Cookbook:DeObMail]] &rarr; Verstecken von E-Mail-Adressen%0a* [[Cookbook:Spam filters]] &rarr; Automatische Blockade gewisser Spambots%0a* [[Cookbook:AuditImages]] &rarr; Kontrolle der ins Wiki hochgeladenen (Bild-)Dateien%0a* [[Cookbook:Private groups]] &rarr; Erzeugen und Absichern privater Gruppen in einem öffentlichen Wiki%0a* [[Cookbook:Only one login]] &rarr; Zu jedem Zeitpunkt nur ein Einloggen für einen Benutzernamen zulassen%0a* [[Cookbook:Recipe check]] &rarr; Prüfung auf neue Versionen von Rezepten auf pmwiki.org%0a* [[Cookbook:Session guard]] &rarr; Schutz vor Session-Diebstahl%0a* [[Cookbook:TrackChanges]] &rarr; Wie man alle kürzlichen Änderungen leichter aufspürt und verifiziert%0a* [[Cookbook:SwitchToSSLMode]] &rarr; Ein Weg, https zu erzwingen (statt http) %0a%0a>>faq%3c%3c [[#faq]]%0a%0aQ: Wie melde ich mögliche Verwundbarkeiten der Sicherheit in PmWiki?%0a%0aA: [[https://www.pmichaud.com|Pm]] schrieb darüber in [[https://pmichaud.com/pipermail/pmwiki-users/2006-September/031793.html | einer Veröffentlichung an pmwiki-Benutzer vom September 2006]]. In aller Kürze unterscheiden er zwischen zwei Fällen:%0a## Die mögliche Verwundbarkeit ist noch nicht öffentlich bekannt: In diesem Fall [[PmWiki/contact us|kontaktieren]] Sie Pm in einer persönlichen Mail.%0a## Die mögliche Verwundbarkeit ist bereits öffentlich bekannt: In diesem Fall diskutieren Sie die Verwundbarkeit öffentlich (z. B. auf [[https://www.pmichaud.com/mailman/listinfo/pmwiki-users | pmwiki-users]]).%0aSiehe [[https://pmichaud.com/pipermail/pmwiki-users/2006-September/031793.html | seine oben erwähnte Nachricht]] wegen Details und Begründungen.%0a%0a%0aQ: Was ist mit den Botnet-Sicherheits-Ratschlägen in  %25newwin%25[[https://isc.sans.org/diary.php?storyid=1672]]?%0a%0aA: Sites, bei denen PHPs ''register_globals''-Einstellungen auf "On" gesetzt sind und Versionen vom PmWiki vor 2.1.21 könnten verwundbar durch ein Botnet sein durch Ausnutzen eines Fehlers in PHP. Die Verwundbarkeit kann geschlossen werden, indem man ''register_globals'' auf "off" stellt, auf PmWiki 2.1.21 oder später upgradet oder die PHP-Versionen 4.4.3 oder 5.1.4 upgradet.[[%3c%3c]] Zusatz: Es gibt einen Test in  [[PmWiki:SiteAnalyzer]], der benutzt werden kann, um zu bestimmen, ob Ihre Site verwundbar ist. %0a%0a%0a[[#wikivandalism]]%0a!! Wiki-Vandalismus und [[!Spam]] %0a:Annahmen: Sie nutzen eine  [[PmWikiDe/Blocklist|+]] und  [[PmWikiDe/Url approvals|+]].%0a: : Sie wollen nicht darauf zurückgreifen, das gesamte Wiki durch [[Passwords|+]] zu schützen, das ist letztlich nicht der Punkt.%0a: : Idealerweise wird dieser Schutz in @@''config.php''@@ aktiviert.%0a%0a%0aQ: Wie beende ich das [[PmWikiDe/DeletingPages|Löschen]] von Seiten, d. h. wie schütze ich Seiten vorm Löschen mit einem Passwort?%0aA: Benutzen Sie Cookbook:DeleteAction und schützen Sie die Löschen-[[availableActions|Aktion]] mit einem Passwort, %0a->indem Sie  %25hlt php%25@@$DefaultPasswords['delete'] = '*';@@ in die @@''config.php''@@-Datei einfügen%0a->oder schützen Sie die Aktion %0a-->durch  %25hlt php%25@@$HandleAuth['delete'] = 'edit';@@ um ein Bearbeiten-Passwort für das Löschen erforderlich zu machen,%0a-->oder durch %25hlt php%25@@$HandleAuth['delete'] = 'admin';@@ um ein Administrator-Passwort für das Löschen erforderlich zu machen.  %0a%0a%0aQ: Wie verhindere ich, dass Seiteninhalte durch eine leere (alles Leerzeichen) Seite ersetzt wird?%0aA: Fügen Sie [@block: /^\s*$/@] zu Ihrer [[PmWikiDe/blocklist|+]] hinzu.%0a%0a%0aQ: Wie kann ich verhindern, dass Seiten durch alberne Kommentare wie ''exellente Site, großartige Informationen,'' ersetzt werden, wo der Inhalt nicht blockiert werden kann?%0a%0aA: Versuchen Sie eine neuere [[PmWikiDe/Blocklist#automaticblocklists | Automatische Blockadeliste]], die Informationen über IP-Adressen von bekannten Wiki-Verunstaltern zieht.%0a%0aA: (ODER) Versuchen Sie [[Cookbook:Captchas]] or [[Cookbook:Captcha]] anzuwenden (Beachten Sie, die sind verschieden).%0a%0aA: (ODER) Setzen Sie ein Bearbeiten-Passwort, machen es aber in der [[{$SiteGroup}.AuthForm]]-Vorlage öffentlich. %0a%0a%0aQ: Wie kann ich alle gemeinsamen Seiten in allen Gruppen wie RecentChanges, Search, GroupHeader, GroupFooter usw. mit einem Passwort schützen?%0a%0aA: Fügen Sie die folgenden Zeilen in Ihre ''local/config.php''-Datei ein. Ein Bearbeiten dieser Seiten wird dann ein Administrator-Passwort erfordern.%0a %0a->%25hlt php%25[@%0a## Require admin password to edit RecentChanges (etc.) pages.%0aif ($action=='edit'%0a    && preg_match('/\\.(Search|Group(Header|Footer)|(All)?RecentChanges)$/', $pagename))%0a  { $DefaultPasswords['edit'] = pmcrypt('secret phrase'); }%0a@]%0a%0aAnmerkung: Alle GroupAttributes-Seiten sind durch das 'attr'-Passwort geschützt.%0a%0aA:'''Alternative''': Sie können eine 'admin'-Authentifizierung für diese Seiten erforderlich machen:%0a%0a %25hlt php%25[@%0a## Require admin password to edit RecentChanges (etc.) pages.%0aif ($action=='edit' %0a    && preg_match('(Search|Group(Header|Footer)|(All)?RecentChanges)', $pagename))%0a  { $HandleAuth['edit'] = 'admin'; }%0a@]%0a%0a-->Ich fürchte, wegen meiner sauberen URLs muss ich den regulären Ausdruck etwas kürzen. Außerdem setze ich das Bearbeiten-Passwort für diese Seiten auf das Administrator-Passwort in  @@[[PmWikiDe/SecurityVariables#DefaultPasswords|$DefaultPasswords['admin']]] = pmcrypt('secret phrase');@@ in ''local/config.php''.%0a-->Soweit ich sehen kann, funktioniert das für mich wie erwartet. --Rico, 2007-02-02%0a%0a%0aQ: Wie schütze ich das Anlegen neuer Gruppen mit einem Passwort?%0a%0aA: Siehe [[Cookbook:Limit Wiki Groups]] &rarr; {Cookbook.LimitWikiGroups$:Summary}%0a%0a%0aQ: Wie schütze ich das Anlegen neuer Seiten mit einem Passwort?%0a %0aA: Siehe [[Cookbook:Limit new pages in Wiki Groups]] &rarr; {Cookbook.LimitNewPagesInWikiGroups$:Summary}%0a%0a%0aQ: Wie kann ich eine Art Whitelist machen, wo Benutzer von bekannten oder vertrauenswürdigen IP-Adressen Seiten bearbeiten können, alle Anderen aber ein Passwort brauchen? %0a%0aA: Fügen Sie diese Zeilen in ''local/config.php'' ein:%0a-> %25hlt php%25[@%0a## Allow passwordless editing from own turf, pass for others.%0aif ($action=='edit'%0a && !preg_match("^90.68.", $_SERVER['REMOTE_ADDR']) )    %0a { $DefaultPasswords['edit'] = pmcrypt('foobar'); }%0a@]%0aErsetzen Sie "@@90.68.@@" durch den bevorzugten Netzwerk-Präfix und "@@foobar@@" durch das Standardpasswort für Andere.%0a%0aFür eine einzelne IP benutzen Sie: %0a->%25hlt php%25[@%0aif($_SERVER['REMOTE_ADDR'] == '127.0.0.1') { # Ihre IP-Adresse hierhin%0a $_POST['authpw'] = 'xxx';                  # das Admin-Passwort%0a}%0a@]%0a%0aBitte beachten Sie die Sicherheitsaspekte: das bedeutet nämlich, dass Sie das Admin-Passwort als Klartext in Ihrer ''@@config.php@@''-Datei stehen haben und jemand mit Zugriff auf das Dateisystem diese Datei lesen kann, z. B. ein technischer Mitarbeiter des hostenden Providers. Ihre IP-Adresse kann sich gelegentlich ändern (es sei denn, Sie haben einen Vertrag über eine fixe IP mit ihrem Internet-Service-Provider [ISP]). Wenn das passiert, wird jemand mit Ihrer alten IP-Adresse automatisch als Admin in Ihrem Wiki angemeldet. Es ist extrem unwahrscheinlich, dass es Probleme gibt, aber Sie sollen wissen, dass das möglich ist. Wenn Sie hinter einem Router sitzen, haben alle anderen Geräte hinter diesem Router im Internet die gleiche IP-Adresse wie Sie (aus der Sicht des Wikis) &mdash; Ihr WiFi-Telefon, dass Notebook Ihrer Frau, ein Nachbar, der Ihre WiFi-Verbindung mitbenutzt etc. Alle diese Leute werden Admin Ihres Wikis. Nochmal: Sie sollten prüfen, ob sich daraus ein Sicherheitsrisiko ergibt. In manchen Fällen routet Ihr ISP Ihren Verkehr gemeinsam mit dem anderer Leute über einen gemeinsamen Proxy(-Server) &mdash; in solch einem Fall könnten tausende von Leuten die selbe IP-Adresse haben.   %0a%0aA: Siehe auch Cookbook:AuthDNS & Cookbook:PersistentLogin%0a%0aQ: Wie setze oder lösche ich ein Passwort für eine Gruppe oder Seite in @@''config.php''@@?%0a%0aA: siehe [[Passwords#faq|+]] und [[PasswordsAdmin#faq|+]].%0a%0a%0aQ: Wie schütze ich [[PmWikiDe/AvailableActions|Seitenaktionen]] durch ein Passwort?%0a%0aA: Siehe [[PmWikiDe/Passwords|+]] wegen der Einstellungen in der ''config.php''-Datei.  %0a-> %25hlt php%25@@[[PmWikiDe/SecurityVariables#HandleAuth|$HandleAuth]]['[==]''pageactionname''[==]'] = 'pageactionname'; # zusammen mit :@@%0a-> %25hlt php%25@@$DefaultPasswords['[==]''pageactionname''[==]'] = pmcrypt('secret&nbsp;phrase');@@%0aA: oder %0a-> %25hlt php%25@@[[PmWikiDe/SecurityVariables#HandleAuth|$HandleAuth]]['[==]''pageactionname''[==]'] = 'anotherpageactionname';@@%0a%0a%0aQ: Wie erlaube ich Verfassern nur dann zu veröffentlichen, wenn Sie auch ein [[Profil(es/)]] haben?%0a%0aA: Fügen Sie dies in Ihre ''local/config.php'' unterhalb der  @@include_once("$FarmD/scripts/author.php");@@-Zeile:%0a%0a-> @@if(!PageExists('Profiles.'.$Author)&&$action=='edit')@@%0a-> @@ [[PmWikiDe/SecurityVariables#HandleAuth|$HandleAuth]]['edit'] = 'admin'; @@%0a%0aDies ist eine mögliche Lösung, aber seien Sie gewarnt, Autoren können dann auch keine Wikiseite in der [[Profile(s)]]-Gruppe neu anlegen.\\%0aErgänzen Sie @@if($group != 'Profiles')@@ oben ;-)%0a%0a%0aQ: Wie macht man eine Regel, die nur den Autoren selbst erlaubt, ihre eigene Wikiseite in der [[Profile(s)]]-Gruppe zu bearbeiten?%0a%0aA: Fügen Sie dies zu Ihrer ''local/config.php''-Datei hinzu:%0a%0a->@@$name = PageVar($pagename, '$Name');@@%0a->@@if($group=='Profiles') $DefaultPasswords['edit'] = 'id:'.$name;@@%0a%0a%0aQ: Wie moderiere ich alle Veröffentlichungen? %0aA: Aktivieren Sie [[PmWikiDe.Drafts|+]]%0a* Setzen Sie [[PmWikiDe/EditVariables#EnableDrafts|$EnableDrafts]], damit wird der "$[Save]"-Button in zwei einzelne Buttons aufgeteilt: "$[Publish]" und "$[Save draft]".%0a* Setzen Sie dann [[PmWikiDe/SecurityVariables#EnablePublishAttr|$EnablePublishAttr]]. Das fügt eine "$[Publish]"-Autorisierungsebene ein, um das Bearbeiten der Entwürfe vom $[Publish] des neuen Textes unterscheiden zu können.  %0a%0a%0aQ: Wie mache ich ein Read-Only-Wiki?%0a%0aA: [[PmWikiDe/PasswordsAdmin|Setzen]] Sie ein 'edit'-Passwort in ''@@config.php@@''.%0a%0a %0aQ: Wie schränke ich den Zugriff auf [[PmWikiDe/Uploads|hochgeladene Anhänge]] ein?%0a%0aA: Siehe%0a* [[PmWikiDe/UploadsAdmin#direct_download|Instruktionen]] wegen Abweisung öffentlicher Zugriffe auf das ''uploads''-Verzeichnis.%0a* [[Cookbook:Secure attachments]] &rarr; {Cookbook.SecureAttachments$:Summary}%0a%0a%0aQ: Wie verberge ich die IP-Adresse in den "diff"-Seiten?%0a%0aA: Wenn der Benutzer einen Benutzernamen einträgt, erscheint dieser an stelle der IP-Adresse. Um das Eintragen eines Benutzernamen zu erzwingen, setzen Sie das Folgende in die ''@@config.php@@''-Datei ein:%0a  [[PmWikiDe/EditVariables#EnablePostAuthorRequired|$EnablePostAuthorRequired]] = 1;%0aA: Die IP-Adress kann auch in dem Tooltip-Titel erscheinen, wenn der Mauscursor über dem Autorennamen ist. Wenn Sie das deaktivieren möchten, dass setzen Sie das Folgende in Ihre ''@@config.php@@''-Datei:%0a%25hlt php%25[@%0a$DiffStartFmt = %0a  "%3cdiv class='diffbox'>%3cdiv class='difftime'>%3ca name='diff\$DiffGMT' href='#diff\$DiffGMT'>\$DiffTime%3c/a>%0a   \$[by] %3cspan class='diffauthor'>\$DiffAuthor%3c/span> - \$DiffChangeSum%3c/div>";%0a@]%0a%0aQ: Wie halte ich einige Apacheinstallationen davon ab, (hochgeladene) Dateien die ".php", ".pl" oder ".cgi" irgendwo im Dateinamen haben, auszuführen.%0a%0aA: Benutzen Sie [[PmWikiDe/UploadVariables#UploadBlacklist|$UploadBlacklist]]%0a%0aQ: Wie hindere ich irgendwelche Leute daran, den Quelltext meiner Wikiseiten mit ?action=source zu inspizieren. Ich habe %25pmhlt%25[@(:if auth edit:)@]-Text darin, den ich nicht der ganzen Welt präsentieren möchte.%0aA: %25hlt php%25@@[[PmWikiDe/SecurityVariables#HandleAuth|$HandleAuth]]['source'] = 'edit';@@ oder @@[[PmWikiDe/SecurityVariables#HandleAuth|$HandleAuth]]['source'] = 'admin';@@%0a%0aQ: Wie %25newwin%25[[https://en.wikipedia.org/wiki/Secure_cookie|sichere]] ich meine [[https://developer.mozilla.org/de/docs/Web/HTTP/Cookies#Secure_and_HttpOnly_cookies|Cookies]]?%0aA: Siehe $EnableCookieSecure und $EnableCookieHTTPOnly%0a%0aQ: Wie setze ich ein globales Passwort, um Spambots auszuschließen und Menschen über das Passwort zu informieren?%0aA: Siehe [[Cookbook:OpenPass-Talk]]%0a[[#faqend]]%0a>>%3c%3c%0a
time=1657959391
title=Sicherheit
