version=pmwiki-2.2.60 ordered=1 urlencoded=1
author=a
charset=UTF-8
csum=
ctime=1145830103
name=PmWikiFr.AuthUser
rev=25
targets=PmWikiFr.Passwords,PmWiki.ThoughtsOnAccessControl,Site.AuthUser,PmWiki.Passwords,PmWikiFr.PasswordsAdmin,Cookbook.AuthUser,PmWikiFr.IndexDocAdmin
text=(:title Authentification utilisateur:)%0a%25vert%25 Traduction à compléter%0a%0a%25audience%25 administrateurs (intermédiaire)%0aAuthUser est le système d'autorisation de PmWiki basé sur un système d'identification qui permet d'accéder aux pages à travers l'usage de noms d'utilisateurs et de mots de passe. `AuthUser peut être utilisé en plus du système par défaut comportant uniquement des [[Passwords|mots de passe]].%0a%0aAuthUser est un système très flexible pour gérer le contrôle d'accès aux pages, mais la flexibilité peut aussi ajouter de la complexité et augmenter la charge de maintenance pour l'administrateur du wiki. C'est pourquoi PmWiki dispose par défaut d'un système des plus simples utilisant uniquement des mots de passe. Pour plus de détails sur les avantages respectifs des deux approches, voir [[PmWiki:ThoughtsOnAccessControl]].%0a%0a!! Activer AuthUser%0a%0aPour activer le système d'autorisation basé sur l'identifiant, ajouter la ligne suivante au fichier ''local/config.php'' :%0a%0a%0a    include_once("$FarmD/scripts/authuser.php");%0a%0a!! Créer des comptes utilisateurs%0a%0aLa plus grande partie de la configuration de AuthUser est faite via la page [[Site.AuthUser]]. Pour changer la configuration du script AuthUser, il faut simplement modifier cette page comme toute autre page du wiki (vous devriez normalement avoir besoin du mot de passe du site pour cela).%0a%0aPour créer un compte login, ajoutez simplement des lignes à la page Site.AuthUser comme suit:%0a%0a    username: [=(:=]encrypt ''password'':)%0a%0aPar exemple, pour créer un compte login pour "alice" avec un mot de passe "paysdesmerveilles", spécifiez :%0a%0a    alice: [=(:=]encrypt paysdesmerveilles:)%0a%0aQuand la page sera sauvée, la partie du texte "@@[=(:=]encrypt paysdesmerveilles:)@@" sera remplacée par une forme chiffrée du mot de passe "paysdesmerveilles". Ce chiffrement est fait de manière à ce que quelqu'un regardant la page Site.AuthUser ne puisse pas aisément trouver le mot de passe stocké dans la page.  %0a%0a->%25note%25 Pour une meilleure sécurité, [[Site.AuthUser?action=attr | mettre un mot de passe en lecture]] sur la page Site.AuthUser.%0a%0aPour le changement ou la mise à zéro d'un mot de passe de compte, remplacez simplement la chaîne chiffrée par une autre directive @@[=(:=]encrypt:)@@.%0a%0a!! Contrôler l'accès aux pages par login%0a%0aLes Pages et les groupes peuvent être protégés en se basant sur le login du compte en utilisant "passwords" sous la forme [@id:username@] dans le champ du mot de passe [@?action=attr@] (voir [[PmWiki.Passwords]]).  Par exemple, pour restreindre une page ayant été éditée par Alice, on peut appliquer le mot de passe "[@id:alice@]".%0a%0aIl est possible d'utiliser plusieurs déclarations d'"id:" et de mot de passe dans le formulaire [@?action=attr@], ainsi le paramétrage suivant donne l'accès à Alice, Carole, et quiconque connait le mot de passe "rapide":%0a%0a    rapide id:alice,carole%0a%0aPour donner l'accès à toute personne qui s'est connectée avec succès, utilisez "[@id:*@]".%0a%0aOn peut aussi mettre en place des restrictions basées sur l'identité pour tout le site dans le tableau $DefaultPasswords : càd%0a%0a    # Nécessite une identification valide avant de voir la page%0a    $DefaultPasswords['read'] = 'id:*';%0a    # Alice et Carole peuvent éditer%0a    $DefaultPasswords['edit'] = 'id:alice,carole';%0a    # Tous les admin et Fred peuvent éditer%0a    $DefaultPasswords['edit'] = array(' %3cat> admins', 'id:Fred');%0a%0aVous pouvez changer le tableau par défaut $DefaultPasswords dans les fichiers de configuration locaux comme par exemple :%0a* local/config.php (pour tout le wiki)%0a* farmconfig.php (pour toute la ferme de wiki)%0a%0a%0a!! Organiser les compte par groupes%0a%0aAuthUser permet aussi de rassembler des comptes de login dans des groupes d'autorisation, indiqués par le symbole "@" au début du nom du groupe. Comme pour des comptes individuels, l'appartenance à un groupe est gérée en éditant la page Site.AuthUse.  L'appartenance à un groupe peut être spécifiée soit en listant les groupes pour un login (la personne appartient à des groupes) soit en listant les login pour un groupe (le groupe contient des personnes).  Vous pouvez répéter et mélanger ces deux types d'instruction :%0a%0a    @writers: alice, bob%0a    carol: @writers, @editors%0a    @admins: alice, dave%0a    %0aEnsuite, pour restreindre l'accès à une page à un groupe particulier, utilisez simplement "[@@group@]" comme "mot de passe" dans [@?action=attr@] ou dans le tableau $DefaultPasswords, de la même manière que "[@id:username@]" est utilisé pour n'autoriser l'accès qu'à des comptes individuels spécifiques.%0a%0a!!! Exclure des individus des groupes de mots de passe%0a%0aGroup password memberships are maintained by editing the Site.AuthUser page. To specify a password group that allows access to anyone who is authenticated, you can specify:%0a%0a    @wholeoffice: *%0a%0aSi vous vouliez exclure "Fred" de ce groupe, vous pourriez essayer ceci :%0a%0a    @wholeoffice: *, -Fred%0a%0a...sauf que cela %25red%25'''ne marche pas'''%25%25. You can, however, get the desired result by using the first setting (@wholeoffice: *) on the Site.AuthUser page and then setting the password for the page or group you wish to protect in [@?action=attr@] or the $DefaultPasswords array to "[@id:*, -Fred@]".%0a%0a%0a!! Obtenir les noms des comptes et les mots de passe depuis des sources externes%0a%0aLe script AuthUser a la  possibilité d'obtenir les couples identifiant/mot-de-passe depuis d'autres sources que la page Site.AuthUser, comme des fichiers passwd ('.htpasswd' sur serveurs Apache), des serveurs LDAP ou même le fichier ''local/config.php''.%0a%0a%0a!!! Passwd-formatted files (.htpasswd)%0a%0aPasswd-formatted files, commonly called ''.htpasswd'' files in Apache, are text files where each line contains a username and an encrypted password separated by a colon.  A typical ''.htpasswd'' file might look like:%0a%0a    alice:vK99sgDV1an6I%0a    carol:Q1kSeNcTfwqjs%0a%0aTo get AuthUser to obtain usernames and passwords from a ''.htaccess'' file, add the following line to Site.AuthUser, replacing "/path/to/.htpasswd" with the filesystem path of the ''.htpasswd'' file:%0a%0a    htpasswd: /path/to/.htpasswd%0a%0aCreation and maintenance of the ''.htpasswd'' file can be performed using a text editor, or any number of other third-party tools available for maintaining ''.htpasswd'' files.  The Apache web server typically includes an ''htpasswd'' command for creating accounts in .htpasswd:%0a%0a    $ htpasswd /path/to/.htpasswd alice%0a    New password:%0a    Re-type new password:%0a    Adding password for user alice%0a    $%0a%0a%0a!!! Configuration via ''local/config.php''%0a%0aAuthUser configuration settings can also be made from the ''local/config.php'' file in addition to the Site.AuthUser page.  Such settings are placed in the $AuthUser array, and ''must be set prior to including the ''authuser.php'' script''. Some examples:%0a%0a    # set a password for alice%0a    $AuthUser['alice'] = crypt('wonderland');%0a    # set a password for carol%0a    $AuthUser['carol'] = '$1$CknC8zAs$dC8z2vu3UvnIXMfOcGDON0';%0a    # Use local/.htpasswd for usernames/passwords%0a    $AuthUser['htaccess'] = 'local/.htpasswd';%0a%0a%0a!! Définir le nom de l'auteur%0aPar défaut, PmWiki utilise le nom d’utilisateur dans le champ "Auteur" du formulaire de modification de page, mais permet à l'utilisateur de changer cette valeur avant de sauvegarder ses modifications. Pour empêcher ceci (et donc forcer l'utilisation du nom d'utilisateur en tant que nom d'auteur), utilisez les instructions ci-dessous dans votre fichier local/config.php :%0a%0a    include_once("$FarmD/scripts/authuser.php");%0a    $Author = $AuthId;%0a%0a!! Voir aussi%0a%0a* [[PmWikiFr.Passwords|+]]%0a* [[PmWikiFr.PasswordsAdmin|+]]%0a* [[Cookbook:AuthUser]] pour des trucs et astuces%0a* [[Site.AuthUser]]%0a%0a%25trail%25%3c%3c|[[Index Doc Admin]]|>>
time=1390478462
title=Authentification utilisateur
