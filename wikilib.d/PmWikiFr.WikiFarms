version=pmwiki-2.2.30 ordered=1 urlencoded=1
author=PRZ
charset=UTF-8
csum=
ctime=1144189272
name=PmWikiFr.WikiFarms
rev=8
targets=PmWikiFr.WikiFarms,PmWikiFr.WikiGroup,PmWikiFr.LocalCustomizations,PmWikiFr.Upgrades,PmWikiFr.Installation,PmWikiFr.ReleaseNotes,Profiles.Egide,PmWikiFr.PerGroupCustomizations,PmWikiFr.UploadsAdmin,PmWikiFr.InterMap,PmWikiFr.IndexDocAdmin
text=(:title Fermes Wiki:)%0aLes Fermes Wiki sont un mécanisme destiné à faire tourner plusieurs Wikis indépendants sur une seule installation [=PmWiki=]. Si une [[WikiFarms |ferme Wiki]] est une collection de Wikis indépendants, alors chaque Wiki dans la ferme est usuellement appellé un champ Wiki. Une personne qui supervise l'installation du moteur `PmWiki est appellé un ''administrateur de ferme'', alors que les administrateurs de chaque champ sont les ''administrateurs de champ''. Chaque champ peut avoir sa propre URL, son ensemble de pages et de [[groupes Wiki->WikiGroup]], le téléchargement, les modèles de page, les mots de passe, et autres [[configurations locales->LocalCustomizations]].  %0a%0aPlus important, la [[mise à jour->Upgrades]] du moteur vers une (unique) ferme met à jour automatiquement tous  les champs de la ferme. De plus, les personnalisations peuvent être faites au niveau de la ferme, et s'appliquer à tous ses champs.%0a%0aLe reste de ce document décrit comment mettre en oeuvre des fermes Wiki et les champs associés, et suppose que vous êtes déjà familiarisés avec les détails de l'[[installation|+]] de [=PmWiki=].%0a%0a!!!Installer une ferme Wiki (administrateur de ferme)%0a%0aInstaller `PmWiki pour le faire fonctionner comme une ferme Wiki est relativement simple. L'administrateur de la ferme crée simplement un fichier ''local/farmconfig.php'' avec les [[LocalCustomizations |configurations locales]] nécessaires pour tous les champs. Habituellement, cela signifie définir $FarmPubDirUrl et $PageTemplateFmt pour le nouveau champ. Un fichier  ''farmconfig.php'' minimum pourrait être:%0a%0a    %3c?php%0a      $FarmPubDirUrl = [='http://www.exemple.com/pmwiki/pub'=];%0a      $PageTemplateFmt = "$FarmD/pub/skins/pmwiki/pmwiki-farm.tmpl";%0a    ?>%0a%0aAttention, la variable $PageTemplateFmt est dépréciée depuis la version 2 cf [[ReleaseNotes|+]] [[~Egide]] 16 août 2005 à 14h24%0a%0a$FarmPubDirUrl est utilisé pour fournir aux champs l'URL de la ferme sur le répertoire ''pub/'', et $PageTemplateFmt est modifié pour être une version "ferme" partagée de la mise en page par défaut.  (La seule vraie différence entre le modèle normal et le modèle pour ferme est que chaque modèle pour ferme utilise $FarmPubDirUrl au lieu de $PubDirUrl dans les fichiers .css.)  %0a%0aTout est fait -- votre installation `PmWiki est maintenant prête à être configurée pour être une ferme!%0a%0a!!!Mise en oeuvre d'un champ dans une ferme Wiki (administrateur de champ)%0a%0aAprès installation de `PmWiki pour en faire une ferme Wiki, un nouveau champ est créé en opérant comme suit:%0a%0a1. Créer un répertoire pour le champ. Normalement le répertoire du champ est dans une zone accessible par Internet (c.a.d., dans ''public_html''), mais il peut être mis partout ou une installation `PmWiki pourrait l'être.%0a%0a2. Créer un script PHP (c.a.d., ''field.php'') dans le répertoire de champ avec la ligne suivante%0a%0a    %3c?php include([='=]''chemin/vers/pmwiki.php'''); ?>%0a%0aou ''chemin/vers/pmwiki.php'' est le chemin de l'installation de la ferme.%0a%0a->%25note%25  Noter qu'il n'est pas suffisant d'utiliser des liens symboliques ou des raccourcis pour se connecter à l'installation de la ferme ''pmwiki.php''; on doit utiliser un include de manière à ce que [=PmWiki=] soit capable de situer correctement la situation des ''scripts/'' de la ferme et des autres répertoires.%0a%0a3.  Changer les attributs du répertoire de champ en  2777.%0a%0a4.  Ouvrez un navigateur web et exécuter le script ''field.php'' que vous avez créé lors de l'étape #2. Ceci créera les répertoires nécessaires au champ et doit afficher l'installation [=PmWiki=] par défaut (avec tous les paramètres par défaut que l'administrateur de la ferme à défini).%0a%0a%0a!!!Personnalisation des champs et des fermes%0a%0aChaque administrateur de champ peut créer un répertoire ''local/'' dans le répertoire du champ pour une [[configuration locale->LocalCustomizations]] qui s'appliquera au champ. Ceci fonctionne comme sur une installation [=PmWiki=] classique -- le fichier ''local/config.php'' contient les paramètres de la totalité du champ, et les fichiers de la forme ''local/Group.php'' et ''[=local/Group.PageName.php=]'' sont utilisés pour une personnalisation des groupes et des pages (voir [[PerGroupCustomizations|+]]).%0a%0aDans un champ, la variable `PmWiki $FarmD est mise à "répertoire principal" pour l'installation de la ferme [=PmWiki=], aussi un administrateurpeut utiliser ''$FarmD/scripts/'' et ''$FarmD/pub/'' pour renvoyer vers les répertoires de ferme ''scripts/'' et ''pub/''.%0a%0aUn administrateur de ferme peut utiliser le fichier ''local/farmconfig.php'' pour la personnalisation appliquée à tous les champs de la ferme. Par défaut, les personnalisations de ferme sont appliquées avant celle des champs; cependant, l'administrateur de ferme peut forcer certaines personnalisation de champ en appellant explicitement le fichier config.php du champ, comme ceci:%0a%0a  %3c?php%0a    # Paramètres interprétés avant les personnalisations de champ%0a    $FarmPubDirUrl = 'http://www.exemple.com/pmwiki/pub';%0a    $PageTemplateFmt = "$FarmD/pub/skins/pmwiki/pmwiki-farm.tmpl";%0a%0a    # charger les personnalisations du champ (globale et par groupe)%0a    include_once('local/config.php');%0a    include_once('local/pgcust.php');%0a%0a    # forcer les personnalisations de champ ici%0a    $EnableUpload = 0;          # désactive le téléchargement%0a  ?>%0a%0a!!!Notes%0a%0a* Les répertoires de champ peuvent aussi contenir des répertoires locaux ''pub/'' et ''uploads/''. un répertoire ''uploads/'' pour chaque champ sera normalement créé dans le répertoire du champ si les téléchargements sont activés (voir [[UploadsAdmin|+]]).%0a%0a* Les pages distribuées avec PmWiki (c.a.d. la documentation) sont automatiquement partagées entre tous les champs de la ferme.  Ceci est contrôlé via la variable $WikiLibDirs, qui vérifie par défaut dans la copie de la ferme de ''wikilib.d/''.%0a%0a* Le fichier ''farmmap.txt'' dans le répertoire ''local/''  de la ferme peut être utilisé pour fournir des [[InterMap|+]] sur le territoire de la ferme. Ceci peut être pratique pour créer des liens vers les autres pages de la ferme.%0a%0a* En general, les champs peuvent être créés et administrés depuis des comptes utilisateurs autres que celui de la ferme si les persmissions du  système d'exploitation et la configuration de PHP le permettent. La configuration par défaut de PHP le permet normalement, mais certains administrateurs systèmes et hébergeurs changent la configuration de PHP d'une manière que ceci ne soit plus possible.%0a%0aVoir aussi le cookbook: (en Anglais)\\%0aCookbook:WikiFarm et Cookbook:WhichFarmToUse.%0a%0a----%0a%25trail%25 %3c%3c|[[Index doc admin]]|>>
time=1315669216
title=Fermes Wiki
