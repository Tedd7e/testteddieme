version=pmwiki-2.3.12 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum=%25hlt bash%25 (+59)
ctime=1141987964
name=PmWikiDe.BackupAndRestore
rev=15
targets=Cookbook.Cookbook,Cookbook.BackupWithRsync,Cookbook.TwoWayMirroringWithRsync,Cookbook.BackupPages,Cookbook.BackupHTMLZip
text=(:title Datensicherung und Wiederherstellung:)%0a(:Summary: Vorbereitungen für Notfälle:)%0a(:Original_Page: PmWiki.BackupAndRestore:)%0a(:Translation_Date: 2008-03-16:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Administratoren:)%0a%0aDiese Seite enthält einige Hintergrundinformationen über das Erstellen von Sicherungskopien (Backups) und erläutert einige *nix-Sicherungs- und -Wiederherstellungsmethoden.%0a%0a!!Einführung%0a%0aEine Wikiinstallation enthält einmalige Daten in den Verzeichnissen:%0a%0a    local/         lokale Einstellungsdateien/-skripte%0a    cookbook/      Erweiterungen aus dem [[(Cookbook:)Cookbook]]%0a    pub/           Öffentlich zugängliche Dateien%0a    wiki.d/        Wikiseiten%0a    uploads/       Hochgeladene Dateien (Anhänge)%0a    %0aEin guter Backupplan beinhaltet das regelmäßige Archivieren dieser Verzeichnisse &ndash; oder als absolutes Minimum von [@local/@] und [@wiki.d/@]. Vernünftigerweise sollten die Backups auf einem anderen Rechner als das Wiki gelagert werden.%0a%0a!! Einfaches Backup und Wiederherstellen (*nix)%0a%0aBeim Backup gilt: je einfacher, desto besser. Da die PmWiki-Distribution sehr klein ist (1/4 Megabyte), ist es am einfachsten, die Distributionsdateien zusammen mit den Daten zu sichern.%0a%0a!!! Anlegen eines Backuparchives%0a%0aDer folgende *nix-Befehl, ausgeführt im Oberverzeichnis des Wikiverzeichnisses erzeugt ein vollständiges Backup in ihrem Homeverzeichnis.%0a%0a-> %25hlt bash%25[@%0atar -zcvf  ~/wiki-backup-`date +%25Y%25m`.tar.gz  wiki/%0a@]%0a%0a%0a!!! Wiederherstellen des Backuparchives%0a%0a%0a!!!! Der einfache Weg%0a%0aDas Wiki kann innerhalb weniger Sekunden mit den folgenden Befehlen wiederhergestellt werden:%0a%0a-> %25hlt bash%25[@%0atar -zxvf ~/wiki-backup-200512.tar.gz%0afind wiki/uploads/ -type d |xargs chmod 777%0afind wiki/wiki.d/ -type d |xargs chmod 777%0a@]%0a%0a%0a!!!! Ein etwas sichererer Weg%0a%0aDie einfachen Wiederherstellungsbefehle von oben erzeugen Verzeichnisse, auf die Jedermann Schreibrechte besitzt. Dies lässt sich vermeiden, wenn PmWiki die Verzeichnisse mit korrekten Besitzern und Rechten anlegt.%0a%0aBegonnen wird mit%0a%0a-> %25hlt bash%25[@%0atar -zxvf ~/wiki-backup-200512.tar.gz%0arm -rf wiki/wiki.d%0arm -rf uploads%0achmod 2777 wiki/%0a@]%0a%0a%0aJetzt wird eine Datei in jede Gruppe hochgeladen, welche vorher schon Dateien enthielt. Falls das Wiki zuvor keine Anhänge enthielt, besuchen Sie das Wiki einmal, damit das Verzeichnis @@wiki.d/@@ angelegt wird.%0a%0aDas Wiederherstellen wird abgeschlossen mit%0a%0a-> %25hlt bash%25[@%0achmod 755 wiki/%0atar -zxvf ~/wiki-backup-200512.tar.gz%0a@]%0a%0a!!! Details%0aBei den Befehlen auf dieser Seite wird davon ausgegangen, dass sich das Wiki in einem Verzeichnis namens "wiki/" befindet. Das Backup wurde im Dezember 2005 gemacht, deshalb die entsprechende Bezeichnung.%0a%0aDas Wiki besitzt nur dann ein Verzeichnis "uploads/", wenn das Hochladen von Dateien aktiviert wurde.%0a%0aDer Backupbefehl verwendet die Datumsangabe (JJJJMM) im Dateinamen. Falls die Befehle regelmäßig ausgeführt werden, z.B. mittels @@cron@@, können so z.B. monatliche Abbilder erzeugt werden. Durch Anhängen von @@%25d@@ am Datumsformat [@`date +%25Y%25m%25d`@] JJJJMMDD) können tägliche Abbilder erzeugt werden. Vorsicht jedoch bei großen Uploadverzeichnissen.%0a%0a!! Sonstiges%0a%0a!!!Backup via FTP%0a%0aLaden Sie sich einen FTP-Client wie  [[https://filezilla-project.org/download.php?type=client|Filezilla]] herunter und installieren Sie ihn.%0a%0a#Verbinden Sie sich mit Hilfe des FTP-Clients mit dem Server, wo Ihr PmWiki gehostet wird, mittels%0a## der  IP-Addresse (z. B. 123.234.56.67) oder dem FTP-Namen (z. B. ftp.myhost.com).%0a## Geben Sie Ihren Benutzernamen (z. B. mylogin) und Ihr Passwort (z. B. myp4ssw0rd) an.%0a# Wechseln Sie zu ihrem PmWiki-Verzeichnis (z. B. @@/usr/mylogin/web/wiki/@@ oder @@/tahi/public_html/pmwiki@@).%0a# Wählen Sie die Verzeichnisse aus, die Sie sichern wollen, wie es zuvor beschrieben wurde (möglicherweise nur die Daten oder das gesamte Wiki-Verzeichnis).%0a** Für die Daten sichern Sie die beiden Verzeichnisse%0a*** @@wiki.d@@ für die Seiten, die die Benutzer angelegt haben und %0a*** @@pmwikiuploads@@ (oder @@uploads@@) für Ihre Anhänge (uploads).%0a** Für das System sichern Sie &ndash; wenigstens &ndash; die Verzeichnisse %0a*** @@local@@ für die Konfigurationsdateien und  %0a*** @@pub@@ für die lokale Skin- und CSS-Anpassung.%0a# Laden Sie diese Verzeichnisse in ein lokales Verzeichnis herunter. %0a# Benutzen Sie [[https://www.7-zip.org/ | 7zip]] oder eine ähnliche Software, um ein Archiv aus Ihrem Backup zu erzeugen.%0a%0aSie können Ihre FTP-Verzeichnisse auch sehr einfach mit Ihrer Festplatte synchronisieren mittels dieser Kommandozeile:%0a-> %25hlt bash%25[@ wget -nv -np -m ftp://user:password@ftp.yourhost.net/ @]%0a'-Laden Sie sich [[https://sourceforge.net/projects/getgnuwin32/| Wget für Windows]] hier herunter (in anderen System ist es bereits vorhanden).-'%0a%0aAlternativ können Sie die FTP-Verzeichnisse auch mit @@lftp@@ spiegeln:%0a-> %25hlt bash%25[@ lftp -u your_user_name,your_password -e "mirror --verbose  /wiki.d /path/to/local/folder" ftp://your_host @]%0a(Dies wird nur Ihr @@/wiki.d@@-Verzeichnis spiegeln, ersetzen Sie es durch @@/@@, um alles zu spiegeln.)%0a%0a[[#rsync]]%0a!!! Verwendung von rsync%0aSiehe Cookbook:BackupWithRsync und Cookbook:TwoWayMirroringWithRsync.%0a%0a!! Siehe auch%0a%0a* [[https://www.pmwiki.org/pipermail/pmwiki-users/2005-December/thread.html#20661| Backups-Thread]] [gmane.org] in der Maillingliste (engl.)%0a* Kochbuch-Rezept [[(Cookbook:)BackupPages]] [-(nur auf Englisch verfügbar)-]%0a* Kochbuchrezept [[(Cookbook:)Backup HTML Zip]] [-(nur auf Englisch verfügbar)-] %0a
time=1664607708
title=Datensicherung und Wiederherstellung
