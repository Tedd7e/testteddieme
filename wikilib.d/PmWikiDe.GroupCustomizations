version=pmwiki-2.3.21 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum=anchor [[#css]] (+9)
ctime=1304145310
name=PmWikiDe.GroupCustomizations
rev=23
targets=PmWikiDe.WikiGroup,PmWikiDe.WikiAdministrator,PmWikiDe.PathVariables,PmWikiDe.LocalCustomizations,PmWikiDe.GroupHeaders,PmWikiDe.Passwords,PmWikiDe.PasswordsAdmin,PmWikiDe.SecurityVariables,PmWikiDe.WikiCascades,PmWikiDe.BasicVariables,PmWikiDe.GroupAttributes,PmWikiDe.WikiFarms,PmWiki.HierarchicalGroups
text=(:title Individuelle Einstellungen pro Gruppe:)%0a(:Summary: Pro Gruppe können individuelle Einstellungen vorgenommen werden.:)%0a(:Original_Page: PmWiki.{$Name}:)%0a(:Translation_Date: 2011-04-30:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Administratoren (FTP):)%0a%0aEiner der Zwecke von [[Wiki Group|+]] ist, einem [[Wiki Administrator|+]] die Möglichkeit zu geben, die Besonderheiten von PmWiki auf einer per-Gruppen-Basis anzupassen. So kommt die Anpassung pro Gruppe ins Spiel:%0a%0a!! Gruppenspezifische PHP- und CSS-Dateien%0a* Das ''@@local/@@''-Unterverzeichnis (typischerweise in $FarmD) wird benutzt, um lokale Konfigurationen zu speichern.%0a* Das ''@@pub/css/@@''-Unterverzeichnis (typischerweise in $FarmD) wird benutzt, um lokale CSS-Dateien zu speichern.%0a%0aUm eine [[PmWikiDe/LocalCustomizations|lokale Anpassung]] für eine bestimmte Gruppe durchzuführen,   %0a* fügen Sie eine Anpassungsdatei namens "''@@%3cgruppenname>.php@@''" in das ''@@local/@@''-Unterverzeichnis ein, wobei ''@@%3cgruppenname>@@'' durch den wirklichen Namen der Gruppe von Seiten zu ersetzten ist, und%0a* fügen Sie die CSS-Anpassung als Datei namens "''@@%3cgruppenname>.css@@''" in das ''@@pub/css/@@''-Unterverzeichnis ein, wobei ''@@%3cgruppenname>@@'' durch den wirklichen Namen der Gruppe von Seiten zu ersetzten ist.%0aDiese Dateien werden automatisch abgearbeitet, nachdem die lokalen Anpassungen in ''@@config.php@@'' und ''@@local.css@@'' abgearbeitet wurden.%0a%0aUm beispielsweise das Bild zu ersetzen, das in der oberen, linken Ecke der "@@GruppenName@@"-Seiten erscheint, kann man eine ''@@local/GruppenName.php@@''-Datei erzeugen mit folgendem Inhalt:%0a-> %25hlt php%25 [@%0a%3c?php%0a  $PageLogoUrl = "/meinebilder/schach.gif";%0a@]%0aDas Beispiel hat den Effekt, dass alle Seite in der GruppenName-[[WikiGroup|Wikigruppe]] das Bild "/meinebilder/schach.gif" als Logo anstelle des Standardlogos einsetzen.%0a%0aFür das Hinzufügen von Auszeichnungen oberhalb oder unterhalb des Textes siehe [[Group headers|+]].%0a%0a%0a[[#PerPage]]%0a!! Individuelle Anpassungen pro Seite%0a%0aPmWiki erlaubt auch die Anpassungen für einzelne Seiten. Benutzen Sie einfach den kompletten Seitennamen der anzupassenden Seite anstelle des Gruppennamen. Beispielsweise kann man eine Datei ''@@local/Schach.`HomePage.php@@'' nutzen, um lokale Anpassungen für die Seite Schach.`HomePage zu machen.%0a%0aNahezu jede Anpassung, die man in die ''@@config.php@@'' setzen würde, kann man auch für gruppen- oder seitenweise Anpassungen nutzen.%0a%0aEine wichtige Ausnahme dazu ist, '''gruppen- oder seitenweise Anpassungen für Rezept-Skripten zu setzen''', die in der config.php eingefügt wurden. Die meisten Rezepte müssen ihre Anpassungs-Variablen gesetzt bekommen, bevor das Skript eingefügt wird. Statt eine gruppen- oder seitenweise Anpassungs-PHP-Datei zu benutzen, setzt man eine bedingte Anweisung in die config.php, bevor man das Rezeptskript einfügt. Beispiel:%0a%0a%0a-> %25hlt php%25[@%0a## Einschließen der seiten- oder gruppenweisen lokalen PHP-Skripten%0a$pagename = ResolvePageName($pagename);%0ainclude_once("$FarmD/scripts/pgcust.php");%0a%0a$page = PageVar($pagename, '$FullName');%0a$group = PageVar($pagename, '$Group');%0a//gruppenweise Anpassungen:%0aif($group=='GroupName') {%0a   $RecipeVariable = 'valueA';%0a   etc. ...%0a}%0a//seitenweise Anpassungen:%0aif($page=='GroupName.PageName') {%0a   $RecipeVariable = 'valueB';%0a   etc. ...%0a}%0a//include recipe after variables are set:%0ainclude_once('cookbook/recipescript.php');@]%0a%0a%25note%25''Lesen Sie dazu bitte auch %25%25[[LocalCustomizations#configphp-order|Reihenfolge der Befehle in config.php]].''%0a%0a%25red%25Beachten Sie, dass diese Methode nicht dafür benutzt werden kann, die Variable $DefaultPasswords zu setzen, Sie sollten Gruppen- oder Seitenattribute dafür benutzen, siehe [[Passwords|+]] und [[PasswordsAdmin|+]] für weitere Informationen.%0a%0a[[#reihenfolge]]  [[#processingorder]]    %0a!! Bearbeitungsreihenfolge%0aFür alle Anpassungen bearbeitet PmWiki zuerst die ''@@local/config.php@@''. Dann sieht es im ''@@local/@@''-Unterverzeichnis nach, ob es eine Datei für seitenweise Anpassungen gibt und lädt sie ggf., danach ggf. die für gruppenweise Anpassungen. Wenn es keine der beiden Dateien gibt, lädt PmWiki ''@@local/default.php@@''. Wenn es für eine seitenweise Anpassung nötig ist, dass die gruppenweise Anpassung zuerst geladen wird, können Sie das bewirken, indem Sie in der Datei für die seitenweise Anpassung PHPs @@include_once()@@-Funktion benutzen. Für weitere Informationen siehe [[wiki cascades|+]].%0a%0a[[#css]]%0a!! Individuelle CSS-Stile für Gruppen oder Seiten%0aUm CSS-Stile auf Seiten einer bestimmten Gruppe namens [@GruppenName@] anzuwenden, erzeugt man eine Datei namens ''@@GruppenName.css@@'' im ''@@pub/css/@@''-Verzeichnis und füllt diese Datei mit den zusätzlichen Stilregeln. Um Stile auf eine bestimmte Seite anzuwenden, erzeugt man eine Datei in diesem Verzeichnis namens ''@@GruppenName.SeitenName.css@@'' mit den gewünschten CSS-Stilen. Alle CSS-Regeln, die auf alle Wikiseiten angewendet werden sollen, fügt man in die Datei ''pub/css/local.css'' ein.  %0a%0a-> %25hlt css%25[@%0a  body { background: #F4C4B4; }%0a@]%0a%0a!! Verhindern von Konfigurationen auf Gruppenebene%0a%0aJede Anpassungsdatei kann $EnablePGCust=0; setzen, um eine spätere automatische Ausführung einer Seiten-/Gruppen-/Standard-Anpassung zu verhindern. Wenn es für eine seitenweise Anpassung nötig ist, dass die gruppenweise Anpassung zuerst geladen wird, können Sie das bewirken, indem Sie in der Datei für die seitenweise Anpassung PHPs %25hlt php%25[@include_once()@]-Funktion benutzen. Für weitere Informationen siehe  [[wiki cascades|+]].  %0a%0a!! Authentifikation%0aAlle Passwörter für eine Gruppe sollten in den [[Group Attributes| Gruppenattributen]] der Gruppeseite gesetzt werden (siehe [[Passwords Admin|Passwortadministration]]), nicht in einer Gruppen-Anpassungsdatei.%0a%0a!! Wikifarmen berücksichtigen%0a%0a[[Wiki Group|Wikigruppen]] sind ein leichter Weg, mehrere Sites in einer einzigen Wikiinstallation zu beherbergen, indem man jeder Site eine eigenen Gruppe gibt. Ein anderer Weg ist, [[PmWikiDe/Wiki Farms|Wikifarmen]] zu nutzen. Das erlaubt jeder Site, einen eigenen Satz von [[Wiki Group|Wikigruppen]] und lokalen Anpassungsdateien zu haben.%0a%0aMehr dazu in [[PmWikiDe/WikiFarms|Wikifarmen]] &rarr;[-{PmWikiDe/WikiFarms$:Summary}-]%0a%0aWenn sie nach verschachtelten Gruppenebenen suchen, sollten Sie dies bedenken: [[PmWiki:HierarchicalGroups|Pm's design considerations on hierarchical groups]].%0a%0a!! FAQ%0a>>faq%3c%3c[[#faq]]%0aQ:Wie kann ich CSS-Stile auf bestimmte Gruppen oder Seiten anwenden?%0aA:Erzeugen Sie einfach eine ''@@pub/css/Group.css@@''- oder ''@@pub/css/Group.Page.css@@''-Datei, die die angepassten Stildefinitionen für diese Gruppe oder Seite enthält.%0a%0aQ:Warum sollten Passwörter nicht in Gruppen- oder Seitenanpassungsdateien gesetzt werden?%0aA:Der Grund für diesen Ratschlag ist, dass Gruppenanpassungsdateien nur für die angezeigte Seite geladen wird. Wenn also %25hlt php%25@@[=$DefaultPasswords['read']=]@@ in ''local/GruppeA.php'' gesetzt wird, kann jemand eine andere Seite benutzen, um den Inhalt von Seiten der GruppeA einzusehen. Zum Beispiel könnte er in 'Main.WikiSandbox' %0a%0a:: : %25pmhlt%25[@(:include GruppeA.EineSeite:)@]%0a%0aeinfügen. Weil nun die ''GruppeA.php''-Datei nicht geladen wird (er hat ja die Seite Main.WikiSandbox &rarr; ''local/Main.php'' aufgerufen), wird kein Lesepasswort gesetzt.%0a%0aDas gleiche gilt natürlich entsprechend für Seitenapassungsdateien.%0a%0aQ:Ist diese Abarbeitungsreihenfolge nicht befremdlich? Warum wird die Seitenkonfiguration nicht am Schluss geladen (also nach der globalen und der Gruppenkonfiguration)? %0aA:Was wir oft wollen, ist einer Gruppe von Seiten bestimmte Fähigkeiten zu geben, aber diese Fähigkeiten für eine bestimmte Seite zu unterbinden, als seien die nie eingerichtet worden. Wenn die Gruppenkonfigurationsdatei zuerst bearbeitet wird, wird es sehr mühsam/weitschweifig für die Seitenkonfigurationsdatei, die Effekte der vorigen Datei ungeschehen zu machen. Deshalb laden wir die Seiten- vor der Gruppendatei. %0a%0aWenn eine Seitenkonfiguration darauf angewiesen ist, dass die Gruppenkonfiguration zuerst geladen wird, kann sie dem Rezept [[#reihenfolge|oben]] folgen (indem sie PHPs %25hlt php%25@@include_once()@@-Funktion benutzt) oder @@[=$EnablePGCust = 0=]@@ setzen.%0a>>%3c%3c%0a
time=1679466351
title=Individuelle Einstellungen pro Gruppe
