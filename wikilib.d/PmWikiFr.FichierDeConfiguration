version=pmwiki-2.2.36 ordered=1 urlencoded=1
author=Caroline Guénette
charset=UTF-8
csum=correction signature (ajout question + commentaire sur setlocale)
name=PmWikiFr.FichierDeConfiguration
rev=46
targets=PmWikiFr.SampleConfigFile,Profiles.DidierLebrun,Profiles.PRZ,Profiles.Jean-Dom,PmWikiFr.Jean-Dom,Profiles.Farvardin,Profiles.CarolineGuénette,PmWikiFr.IndexDocAdmin
text=Ci-dessous une trame pour la définition d'un fichier de configuration ''config.php'', installé dans le répertoire ''local'', pour la francisation du wiki. %0aIl est aussi possible de créer un fichier complètement indépendant pour la francisation 'français.php' et de l'appeller depuis le fichier de configuration général. %0a[@%0a  include_once('francais.php'); # francisation%0a@]%0aAttention, la position de l'appel n'est pas indifférente, elle doit se trouver avant la majorité des paramètres de configuration.%0a%0avoir [[PmWikiFr/SampleConfigFile|+]]%0a%0a!!!Configuration de base%0a%0a!!! Modules optionnels%0a%0a[[#Francisation]]%0a!!!Francisation%0a%0aVoir aussi (en anglais)%0a*PmWiki:Cookbook.SideBarNameChange %0a*PmWiki:Cookbook.MainGroupChange %0a%0a [@%0a%3c?php if (!defined('PmWiki')) exit();%0a##---------------Francisation -------------------------------%0a## Francisation des commandes (édition, etc.)%0aXLPage('fr','PmWikiFr.XLPage');%0aXLPage('fr','PmWikiFr.XLPageCookbook');%0a$DefaultGroup = 'MonWiki'; # Groupe par défaut%0a$DefaultName = 'Accueil'; # Page de démarrage groupe - défaut 'HomePage' - %0a$TimeFmt = "%25d/%25m/%25Y %25H:%25M";  # Format date/heure  17/02/2004 00:14%0a$CategoryGroup = 'Catégorie';%0a$AuthorGroup = 'Profils'; # Nom du groupe des contributeurs, défaut 'Profiles'%0a$AuthorRequiredFmt = 'Saisir votre nom ou identifiant'; # quand auteur requis%0a$AuthDeniedFmt = 'Un mot de passe valide est requis pour accéder à cette fonction.';%0a## Balise de réponse R: en complément à Q: et A:%0aMarkup('^R:', 'block', '/^(R:.*)$/', "%3c:block>%3cp class='answer'>$1%3c/p>");%0a%0a$PageRefCountFmt = "%3ch1>Références croisées%3c/h1>%3cp>"; # Chaîne dans RefCount%0a$RefCountTimeFmt = "%3csmall>%25d-%25b-%25Y %25H:%25M%3c/small>"; # Chaîne dans RefCount%0a%0a## Gestion des pages%0a$DefaultPageTextFmt = 'La page $Name n\'existe pas';%0a$PageNotFound = 'PmWikiFr.PageInconnue';  #Pour les pages inexistantes%0a$PageRedirectFmt = '%3cp>%3ci>redirigé depuis $FullName%3c/p>';%0a## Expression utilisée pour indiquer qu'une page doit être effacée%0a$DeleteKeyPattern = "^\\s*effacer\\s*$";%0a%0a$RecentChangesFmt = array(%0a  '$SiteGroup.ToutesLesModifs' => %0a    '* [[$Group.$Name]]  . . . $CurrentTime par $AuthorLink: [=$ChangeSummary=]',%0a  '$Group.ModifsDuGroupe' =>%0a    '* [[$Group/$Name]]  . . . $CurrentTime par $AuthorLink: [=$ChangeSummary=]'); %0a%0a## ''(? Ajouter à quoi sert ceci SVP)''%0a$VarPagesFmt = array('PmWikiFr.Variables','PmWikiFr.BasicVariables',%0a  'PmWikiFr.LayoutVariables','PmWikiFr.PathVariables','PmWikiFr.LinkVariables',%0a  'PmWikiFr.EditVariables','PmWikiFr.UploadVariables','PmWikiFr.I18nVariables',%0a  'PmWikiFr.PagelistVariables','PmWikiFr.OtherVariables','PmWikiFr.MailPosts');%0a%0a##--- Styles standard --------------------%0a$WikiStyle['noir']['color'] = 'black';%0a$WikiStyle['blanc']['color'] = 'white';%0a$WikiStyle['rouge']['color'] = 'red';%0a$WikiStyle['vert']['color'] = 'green';%0a$WikiStyle['bleu']['color'] = 'blue';%0a$WikiStyle['jaune']['color'] = 'yellow';%0a$WikiStyle['gris']['color'] = 'gray';%0a$WikiStyle['argent']['color'] = 'silver';%0a$WikiStyle['marron']['color'] = 'maroon';%0a$WikiStyle['pourpre']['color'] = 'purple';%0a$WikiStyle['bleufoncé']['color'] = 'navy';%0a%0a## Chaînes pour la notification par courrier%0a$MailPostsMessage = "Modifications récentes du wiki:\n%0a  ($ScriptUrl/$SiteGroup/ToutesLesModifs)\n\n\$MailPostsList\n";%0a$MailPostsSubject = "$WikiTitle : modifications récentes du wiki";%0a#$MailPostsItemFmt =%0a#  ' * $ScriptUrl/$FullName . . $PostTime par $Author-$RemoteAddr';%0a$MailPostsItemFmt = ' * $FullName . . . $PostTime par $Author';%0a%0a$BlocklistPages = "Admin.ListeDeBlocage"; # *AVANT* le script de blocage%0a$UploadDir = 'fichiers';%0a$ApprovedUrlPagesFmt = array('$DefaultGroup.LiensApprouvés');%0a%0a## Groupes à exclure des recherches - V2 - %0a$EnablePageListProtect = 1; # Exclut les pages cachées des recherches%0a%0a$SearchPatterns['default'][] = '!Attributes$!';%0a$SearchPatterns['default'][] = '!\\.Recherche$!';%0a$SearchPatterns['default'][] = '!\\.(All)?Recent(Changes|Uploads)$!';%0a$SearchPatterns['default'][] = '!\\.ToutesLesModifs$!';%0a$SearchPatterns['default'][] = '!\\.ModifsDuGroupe$!';%0a$SearchPatterns['default'][] = '!\\.Group(Print)?Header$!';%0a$SearchPatterns['default'][] = '!\\.Accueil$!';%0a$SearchPatterns['default'][] = '!\\.Menu$!';%0a$SearchPatterns['default'][] = '!\\.Index!';%0a$SearchPatterns['tout'] = $SearchPatterns['default'];%0a$SearchPatterns['default'][] = '!^PmWiki\\.!'; # Exclusion du groupe PmWiki%0a$SearchPatterns['default'][] = '!^Main\\.!';%0a$SearchPatterns['default'][] = '!^Admin\\.!';%0a$SearchPatterns['default'][] = '!^AdminFr\\.!';%0a%0a$SearchPatterns['dict'] = $SearchPatterns['default'];%0a$SearchPatterns['dict'][] = '!^PmWikiFr\\.!'; # Exclusion groupe PmWikiFr%0a$SearchPatterns['dict'][] = '!\\.pm!';%0a$SearchPatterns['dict'][] = '!\\.PatrickMichaud!';%0a@]%0a%0a----%0a%0a!!! Commentaires%0a%0aJe suggère un ajout pour permettre la prise en compte des caractères accentués sur les systèmes Unix:%0a%0a [@##-- Locale ------------------------------------------------------%0a%0a## Définit la LOCALE appropriée%0a## NB: peut varier selon les systèmes (voir /usr/share/locale)%0asetlocale(LC_ALL,'fr_FR.ISO8859-1');%0a@]%0a[[~DidierLebrun]]%0a%0a%25vert%25Ceci est inutile car la fonction [@XLPage@] le fait déjà en utilisant le contenu du champ ''locale'' de la page XLPage. [[~PRZ]]%0a%0a----%0a%0aJe suggère, quant à moi, de ne pas mettre de caractères accentués dans les noms de pages.%0a%0aMême si cela peut être moins joli à l'écran, l'on évitera peut-être des problème en cas de pages de codes différentes sur des navigateurs différentes, voire en cas de transfert du Wiki chez un autre hébergeur%0a%0aLa page d'accueil peut ainsi s'appeler Bienvenue, au lieu de Présentation, et PageNonTrouvée peut s'appeler [=PageInconnue=]. Pour [=VariableDEdition=], il est très possible de ne pas mettre l'accent sur la lettre majuscule (c'est, certes, une faute de français, mais benigne), et Téléchargement peut devenir Chargement.%0a%0a[[~Jean-Dom]]%0a%0a%0a----%0a%0aTout comme [[Jean-Dom]], je propose également que toutes les pages en français évitent les accents, comme dit sur une autre page certains serveurs les gèrent mal du fait de l'encodage différent. Dommage que cette requête pourtant de bon sens n'ait pas eu de réponse depuis le temps, ni même une ébauche de discussion. [[~Farvardin]]%0a%0a-> On ne peut pas se contenter d'une solution du genre. Ça ne fait guère professionnel sur un site qui accueille des visiteurs inconnus, exclusivement francophone. [[~Caroline Guénette]] - 11 novembre 2011%0a%0a----%0aL'ajout de setlocale n'a pas été inutile pour moi qui utilise pour l'internationalisation en français. J'avais un problème d'accent qui avaient disparu du nom de mes pages suite à la migration de mon hébergeur sur de nouveaux serveurs, problème maintenant résolu par l'ajout de ce bout de code. %0aArnaud%0a%0a%25green%25Voici une copie de la fonction XLPage qui prouve que c'est bien effectué par le système, je soupçonne un problème de définition de la variable 'locale' dans la page XLPage. [[~PRZ]]%0a[@%0afunction XLPage($lang,$p) {%0a  global $TimeFmt,$XLLangs,$FarmD;%0a  $page = ReadPage($p, READPAGE_CURRENT);%0a  if (!$page) return;%0a  $text = preg_replace("/=>\\s*\n/",'=> ',@$page['text']);%0a  foreach(explode("\n",$text) as $l)%0a    if (preg_match('/^\\s*[\'"](.+?)[\'"]\\s*=>\\s*[\'"](.+)[\'"]/',$l,$match))%0a      $xl[stripslashes($match[1])] = stripslashes($match[2]);%0a  if (isset($xl)) {%0a    if (@$xl['xlpage-i18n']) {%0a      $i18n = preg_replace('/[^-\\w]/','',$xl['xlpage-i18n']);%0a      include_once("$FarmD/scripts/xlpage-$i18n.php");%0a    }%0a    if (@$xl['Locale']) setlocale(LC_ALL,$xl['Locale']);%0a    if (@$xl['TimeFmt']) $TimeFmt=$xl['TimeFmt'];%0a    array_unshift($XLLangs,$lang);%0a    XLSDV($lang,$xl);%0a  }%0a}%0a@]%0a%0a-> Pour moi aussi, j'ai besoin du SetLocale. Le comportement est différent selon le développement local (WindowsXP-EasyPHP) versus hébergement, dont les paramètres sont différents. Ainsi, j'ai fait le test suivant:%0a[@setlocale(LC_ALL, 'French_Canada.65001', 'fr_CA.UTF8', 'fr_CA', 'fr-CA.UTF8', 'fr-CA', 'French_Canada', 'French', 'fr');@]%0apour m'apercevoir que les deux setup reconnaissaient une chaîne différente. [[~Caroline Guénette]] - 4 mars 2012%0a%0a----%0a%25trail%25%3c%3c|[[Index doc admin]]|>>%0a%0a----%0a%25tr%25Voir aussi PmWiki:Localization.SampleConfigFileLocalization - Page originale sur PmWiki:PmWikiFr.FichierDeConfiguration
time=1330871656
