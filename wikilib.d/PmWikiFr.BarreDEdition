version=pmwiki-2.2.35 ordered=1 urlencoded=1
author=Petko
charset=UTF-8
csum=re $GUIButtons
name=PmWikiFr.BarreDEdition
rev=14
targets=Profiles.BenoîtPruneau,PmWikiFr.TableDesMatieres,PmWikiFr.CreationAutomatiqueDeVignettes,Profiles.CarolineGuénette,Profiles.Petko,Profiles.Schlaefer,Profiles.Pm,Cookbook.LayoutEditModified,Profiles.PRZ,PmWikiFr.IndexComplements
text=(:title Barre d'édition:)%0a!!!Question%0a%0aComment puis-je ajouter une barre de boutons dans la fenêtre d'édition comme sur le site pmwiki.org ?%0a%0a!!!Réponse%0a%0aDans le fichier local/config.php ajouter :%0a%0a  $EnableGUIButtons = 1;%0a%0aC'est tout !%0a%0aSi vous avez concocté vous-même votre thème PmWiki, assurez-vous d'y avoir la balise  [@%3c!--HTMLHeader-->@] à l'intérieur de la section %3chead>, sinon vous ne verrez jamais la barre de boutons (en plus de vous retrouver avec une erreur Javascript...) [[~Benoît Pruneau]] 10 juin 2009 à 23h17%0a%0a!!!Options %0a%0a!!!! Boutons plus grands%0aVous trouvez peut-être les boutons originaux un peu petits (22x22), utilisez alors un nouveau jeu de boutons plus grands (34x32) :%0a%0a[[GUIButtons32.zip->http://www.pmwiki.org/pmwiki/uploads/Cookbook/GUIButtons32.zip]]%0a%0aCes boutons seront installés dans un nouveau sous-répertoire de /pub, par exemple pub/guiedit32.\\%0aAjoutez la ligne suivante au fichier local/config.php :%0a%0a $GUIButtonDirUrlFmt = "$FarmPubDirUrl/guiedit32"; %0a%0a%0a!!!!Nouveaux boutons%0aVous pouvez ajouter de nouveaux boutons en mettant leur description dans le fichier local/config.php.%0a%0aCe script ajoute une barre de boutons au formulaire d'édition.%0a%0aLes boutons sont placés dans le tableau $GUIButtons, chaque bouton est décrit par un tableau de cinq valeurs :%0a* la position du bouton relativement aux autres (un nombre)%0a* la séquence de balise d'ouverture%0a* la séquence de balise de fermeture%0a* le texte par défaut si rien n'est sélectionné%0a* le texte du bouton, soit (a) une balise HTML ou (b) l'URL d'une image gif/jpg/png à utiliser pour le bouton (avec le "title" optionnel entre guillemets).%0a%0aLa position est juste un numéro d'ordre, vous pouvez avoir des écarts supérieurs à 1 entre les nombres, ce qui permet de réserver de la place pour insérer des boutons plus tard.%0a%0aLes positions actuelles sont :%0a%0a* 'em' : 100%0a* 'strong' : 110%0a* 'pagelink' : 200%0a* 'extlink' : 210%0a* 'attach' : 220%0a* 'big' : 300%0a* 'small' : 310%0a* 'sup' : 320%0a* 'sub' : 330%0a* 'h2' : 400%0a* 'center' : 410%0a%0a%0a'''Autres boutons du fichier sample-config'''%0a%0a* Pour les en-têtes - la différence avec l'existant est l'image%0a [= $GUIButtons['h2'] = array(400, '\\n!! ', '\\n', '$[Heading]',%0a                     '$GUIButtonDirUrlFmt/h2.gif"$[Heading]"');%0a=]%0a* Pour les sous en-têtes%0a [= $GUIButtons['h3'] = array(402, '\\n!!! ', '\\n', '$[Subheading]',%0a                     '$GUIButtonDirUrlFmt/h3.gif"$[Subheading]"');%0a=]%0a* Pour indenter le texte%0a [= $GUIButtons['indent'] = array(500, '\\n->', '\\n', '$[Indented text]',%0a                     '$GUIButtonDirUrlFmt/indent.gif"$[Indented text]"');%0a=]%0a* Pour indenter négativement le texte (l'indentation débute à la deuxième ligne)%0a [= $GUIButtons['outdent'] = array(510, '\\n-%3c', '\\n', '$[Hanging indent]',%0a               '$GUIButtonDirUrlFmt/outdent.gif"$[Hanging indent]"');%0a=]%0a* Pour une liste ordonnée%0a [= $GUIButtons['ol'] = array(520, '\\n# ', '\\n', '$[Ordered list]',%0a               '$GUIButtonDirUrlFmt/ol.gif"$[Ordered (numbered) list]"');%0a=]%0a* Pour une liste à puces%0a [= $GUIButtons['ul'] = array(530, '\\n* ', '\\n', '$[Unordered list]',%0a               '$GUIButtonDirUrlFmt/ul.gif"$[Unordered (bullet) list]"');%0a=]%0a* Pour une ligne de séparation horizontale%0a [= $GUIButtons['hr'] = array(540, '\\n----\\n', '', '',%0a               '$GUIButtonDirUrlFmt/hr.gif"$[Horizontal rule]"');%0a=]%0a* Un modèle de tableau simple%0a [= $GUIButtons['table'] = array(600,%0a           '||border=1 width=80%25\\n||$[!Hdr] ||$[!Hdr] ||$[!Hdr] ||\\n'.%0a           '||     ||     ||     ||\\n||     ||     ||     ||\\n',%0a           '', '', %0a           '$GUIButtonDirUrlFmt/table.gif"$[Table]"');%0a=]%0a%0a!!!! Boutons divers%0a%0a* Un modèle de tableau élaboré%0a [= $GUIButtons ['advtable'] = array(610, %0a    '(:table border=1 width=80%25:)\\n(:cellnr:)\'\'\'$[Header]\'\'\'\\n'.%0a    '(:cell:)\'\'\'$[Header]\'\'\'\\n(:cell:)\'\'\'$[Header]\'\'\'\\n'.%0a    '(:cellnr:)\\n(:cell:)\\n(:cell:)\\n(:tableend:)\\n',%0a    '', '', '$GUIButtonDirUrlFmt/table2.gif"$[Advanced table]"'); %0a=]%0a%0a!!!! Boutons pour les addons du Cookbook : %0a%0a* Table de matières - voir [[Table des matieres|+]] - bouton au début - (actuellement, image uniquement dans le jeu 34x32) %0a%0a [=  $GUIButtons ['pagetoc'] = array(90, '\\n(:toc:)\\n', '', '',%0a     '$GUIButtonDirUrlFmt/toc.gif"$[Table of content]"');				%0a=]%0a%0a* Minimage - voir [[creation automatique de vignettes|création automatique de vignettes]] - bouton à la fin.%0a [=  $GUIButtons ['image'] = array(620, 'Img:', '', '$[MyImage.jpg]',%0a     '$GUIButtonDirUrlFmt/image.gif"$[Insert image]"');%0a=]%0a%0a!!!Discussion%0a%0aUne amélioration au script peut être d'autoriser l'annulation. Sur certains navigateurs/systèmes 'Ctrl-Z' fonctionne, mais pas sur tous.%0a%0a!!!! Changer l'image des boutons par défaut?%0a%0aComment changer l'image par défaut? J'ai modifié $GUIButtonDirUrlFmt pour pointer vers mon skin perso, avec un répertoire de boutons. Le problème est que j'ai des boutons .png et non pas .gif donc il me faudrait changer l'image qui s'affiche par défaut. Comment faire sans modifier le core? [[~Caroline Guénette]]%0a%0a%25Py%25 Vous pouvez définir la variable $GUIButtons dans config.php. --[[~Petko]] 14 novembre 2011 à 09h46%0a[@%0a$GUIButtons = array(%0a  'em'       => array(100, "''", "''", '$[Emphasized]',%0a                  '$GUIButtonDirUrlFmt/em.png"$[Emphasized (italic)]"', %0a                  '$[ak_em]'),%0a  'strong'   => array(110, "'''", "'''", '$[Strong]',%0a                  '$GUIButtonDirUrlFmt/strong.png"$[Strong (bold)]"',%0a                  '$[ak_strong]'),%0a  'pagelink' => array(200, '[[', ']]', '$[Page link]', %0a                  '$GUIButtonDirUrlFmt/pagelink.png"$[Link to internal page]"'),%0a  'extlink'  => array(210, '[[', ']]', 'http:// | $[link text]',%0a                  '$GUIButtonDirUrlFmt/extlink.png"$[Link to external page]"'),%0a  'big'      => array(300, "'+", "+'", '$[Big text]',%0a                  '$GUIButtonDirUrlFmt/big.png"$[Big text]"'),%0a  'small'    => array(310, "'-", "-'", '$[Small text]',%0a                  '$GUIButtonDirUrlFmt/small.png"$[Small text]"'),%0a  'sup'      => array(320, "'^", "^'", '$[Superscript]',%0a                  '$GUIButtonDirUrlFmt/sup.png"$[Superscript]"'),%0a  'sub'      => array(330, "'_", "_'", '$[Subscript]',%0a                  '$GUIButtonDirUrlFmt/sub.png"$[Subscript]"'),%0a  'h2'       => array(400, '\\n!! ', '\\n', '$[Heading]',%0a                  '$GUIButtonDirUrlFmt/h.png"$[Heading]"'),%0a  'center'   => array(410, '%25center%25', '', '',%0a                  '$GUIButtonDirUrlFmt/center.png"$[Center]"'));%0a@]%0a%0a!!!Problèmes%0a* Dans Opera et Khtml le texte est "inlined" à la fin du document, pas à la postion du curseur. - [[~Schlaefer]]%0a-->%25Pm%25 C'est une limitation d'Opera -- Opera ne permet pas de trouver la position du curseur ou d'insérer du texte au milieu d'un élément %3ctextarea>. Je ne sais pas pour Khtml, mais je suppose qu'il s'agit du même problème.  --[[~Pm]]%0a%0aJe ne le savais pas. Je choisis de ne pas afficher la barre de boutons en mettant ce qui suit à la fin de insButton()%0a [=var clientPC = navigator.userAgent.toLowerCase(); %0a var BrowserIsSafari = ((clientPC.indexOf('applewebkit')!=-1)%0a                 && (clientPC.indexOf('spoofer')==-1));%0a var BrowserIsOpera = clientPC.indexOf('opera')!=-1;%0a if (BrowserIsSafari || BrowserIsOpera) return;%0a=]%0a%0a[[~Schlaefer]]%0a%0a!!!Voir aussi%0a%0aUn exemple de barre de gros boutons avec les boutons décrits ci-dessus :%0a%0ahttp://cncloisirs.com/Fonctionnement.BacASable?action=edit%0a%0aNote : vous pouvez aussi trouver sur cette fenêtre d'édition, la suppression du menu, de l'en-tête et du pied de page décrits ici : [[Cookbook/layout edit modified]]%0a%0a!!!Traduction%0a%0aLe texte associé aux boutons peut être traduit dans un langage donné dans les  XLPage(s). Voir le paragraphe approprié dans [[(http://www.pmwiki.org/wiki/)Localization.XLPageTemplate]].%0a%0a!!!Contributeurs%0a%0a* [[~PRZ]]%0a%0a----%0a%25trail%25%3c%3c|[[Index complements|+]]|>>%0a%0a----%0a%25tr%25Traduction de [[(PmWiki:)Cookbook.GuiEdit]] - Page originale sur PmWiki:PmWikiFr.BarreDédition
time=1321285596
title=Barre d'édition
