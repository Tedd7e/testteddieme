version=pmwiki-2.2.30 ordered=1 urlencoded=1
author=CarlosAB
charset=UTF-8
csum=fixing small errors
ctime=1286499886
name=PmWikiPtBr.ConditionalMarkup
rev=5
targets=PmWikiPtBr.AuthUser,PmWikiPtBr.WikiTrails,PmWikiPtBr.PageTextVariables,PmWikiPtBr.PageVariables,PmWikiPtBr.MarkupExpressions,Cookbook.ConditionalMarkupSamples,PmWiki.PageVariables
text=(:Summary:A diretiva "if" permite que partes de uma página sejam incluidas ou excluidas da renderização:)%0a(:title Marcação Condicional:)%0a%25define=indent block margin-left=2em%25%0a(:Audience: autores, admins (avançado) :)%0a!! Usando a diretiva [=(:if:)=]%0aA diretiva [@(:if:)@] A diretiva if permite que partes de uma página sejam incluidas ou excluidas da renderização. As formas genéricas da diretiva [@(:if:)@] são:%0a%0a-> [@(:if cond param:) texto (:ifend:)@]%0a-> [@(:if cond param:) texto (:else:) texto (:ifend:)@]%0a-> [@(:if cond param:) texto (:elseif cond param:) texto (:ifend:)@]%0a%0aOnde "cond"  é uma condição à ser testada, e "param" é um parâmetro ou outro argumento da condição.%0a%0a''Note que [@(:if:)@] sem parâmetros e [@(:ifend:)@] sõ identicos. Note também que [@(:if cond:)@] fecha automaticamente uma condição prévia. Para aninhamento em múltiplos níveis, veja [[#nested-conditions|Condições aninhadas]].''%0a%0a!! Condições embutidas[[#built-in-conditions]]%0aAs condições embutidas incluem:%0a%0a(:table class='indent' border=0 cellpadding=0 cellspacing=0 valign=top:)%0a(:cellnr:)[@(:if name PAGENAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)Página atual tem o nome "[@PAGENAME@]"%0a(:cellnr:)[@(:if group GROUPNAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)Grupo atual tem nome "[@GROUPNAME@]"%0a(:cellnr:)[@(:if auth LEVEL PAGENAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)usuário está autorizado - significa "o que é permitido que o usuário faça" - corresponde a "[@LEVEL@]" onde [@LEVEL@] pode ser: [@read@], [@edit@], [@upload@], [@attr@] ou [@admin@]; [@PAGENAME@] é opcional.%0a(:cellnr:)[@(:if authid:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)Usuário atual esta autenticado - significa que eles provaram quem são ataravés do login - para usar essa capacidade é necessário o uso da receita [[PmWikiPtBr/AuthUser|AuthUser]] ou outras que usem a variável [@$AuthId@] .%0a(:cellnr:)[@(:if enabled InvalidLogin:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)usuário e senha não foram atenticados. É necessário o uso da receita AuthUser.%0a(:cellnr:)[@(:if true:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)sempre irá incluir o texto%0a(:cellnr:)[@(:if false:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)sempre irá excluir o texto (mesmo que comentário)%0a(:cellnr:)[@(:if attachments:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)A Página tual tem um ou mais arquivos anexados%0aSe usado na barra lateral, cabeçalho, ou rodapé a condição será aplicada somente a página principal.%0a(:cellnr:)[@(:if date DATA VALOR:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)[@DATE@] pode ser  ano-mês.  ano-mês-dia é opcional.  %0aAvaliado com verdadeiro se [@VALOR@] está dentro da [@DATA@] ("now" ou "today" é assumido se VALOR for omitido, como nos exemplos a seguir.)  (Note que [@VALOR@] pode ser uma data reconhecida via strtotime() considerando que DATA [ou DATA1 and DATA2 abaixo] tem um formato mais fixo que explicitamente excluem espaços.  Qualquer espaço em DATA1 or DATA2 podem causar resultados imprevisíveis.)%0a(:cellnr:)[@(:if date DATA.. VALOR:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se [@VALOR@] (ou data atual se omitida) é [@DATA@] or later (unlimited)%0a(:cellnr:)[@(:if date ..DATA VALOR:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se [@VALOR@] (ou data atual se omitida) é [@DATA@] or earlier (unlimited)%0a(:cellnr:)[@(:if date DATA1..DATA2 VALOR:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se [@VALOR@] (ou data atual, se omitida) está no intervalo [@DATA1@] até [@DATA2@] (inclusivamente) %0a%25green newwin%25[-''datas estão em [[http://w3.org/QA/Tips/iso-date|standard]] formato yyyy-mm-dd ou yyyymmdd ou yyyymmddThhmm (note o "T" entre a data e a hora, e também veja o comentário acima sobre a formatação de  VALOR).-]''%0a[[%3c%3c]][-Note os ".." não podem ter espaços no início ou no final.-]%0a(:cellnr:)[@(:if enabled VAR:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se variável do PHP (VAR) for verdadeiro%0a(:cellnr:)[@(:if enabled AuthPw:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se o usuário enviu sua senha durante a sessão atual.%0a- Isso não significa que o usuário enviou a senha correta, mas sim que ele enviou uma senha qualquer.%0a(:cellnr:)[@(:if equal STRING1 STRING2:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se [@STRING1@] é igual a [@STRING2@], use aspas se a string ou variavel contém espaços, e.g. [@"MINHA STRING"@]%0a(:cellnr:)[@(:if match REG_EXPRESSION:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se o nome da página atual corresponde à expressão regular%0a(:cellnr:)[@(:if exists PAGENAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se a página ''pagename'' existe%0a(:cellnr:)[@(:if ontrail WikiTrailPage ThisPage:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)verdadeiro se ThisPage está numa lista usada como [[WikiTrails | trail]] em WikiTrailPage%0a(:tableend:)%0a%0aOs condicionais nome e grupo funcionarão mesmo para uma página incluída, como o "nome" e "grupo" condicionais sempre verificar a página exibida atualmente, em oposição a página que a marcação aparece dentro.%0a%0a'''Nota''' : Although there is no built-in conditional markup to test ?action=, you can use [@(:if equal {$Action} AÇÃO:)@] to test what the current action being requested is. Nota: não há marcação condicional embutida para testar qual é a "?action=" atual. Embora seja possível usar [@(:if equal {$Action} AÇÃO:)@] para testar qual a ação atual está sendo solicitada. %0a%0a!! Condicionais negativadas%0aCondicionais negativadas também funcionam:%0a%0a(:table class='indent' border=0 cellpadding=0 cellspacing=0 valign=top:)%0a(:cellnr:)[@(:if !attachments:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)Esta página não possui anexos%0a(:cellnr colspan=3:)&nbsp;%0a(:cellnr:)[@(:if ! name PAGENAME:)@]%0a(:cell rowspan=3:)%0a(:cell rowspan=3 valign=middle:)Página atual não é "[@PAGENAME@]"%0a(:cellnr:)[@(:if name -PAGENAME :)@]%0a(:cell:)%0a(:tableend:)%0a%0a!! Aninhando condicionais [[#nested-conditions]]%0aNote que [@(:if cond:)@] automaticamente fecha uma condional prévia. Assim, os dois exemplos a seguir tem o mesmo significado:%0a* @@ [=(:=]if cond1:) cond1 é verdadeira [=(:=]if cond2:) cond2 é verdadeira [=(:=]ifend:)@@%0a* @@ [=(:=]if cond1:) cond1 é verdadeira %25bgcolor=#fcc%25[=(:=]ifend:)%25%25[=(:=]if cond2:) cond2 é verdadeira [=(:=]ifend:)@@%0a%0aCondicionais podem ser aninhadas desde a versão 2.2.beta 66. Para aninhar condionais você precisa numerar os IFs, and ELSE/IFEND correspondentes:%0a->[@%0a(:if cond1:)%0a  cond1 é verdadeira%0a  (:if2 cond2:)%0a     cond1 e cond2 são verdadeiras%0a  (:else2:)%0a     cond1  é verdadeira, cond2 não é%0a  (:if2end:)%0a(:else:)%0a  cond1 é falsa, cond2 teste foi ignorado%0a(:ifend:)%0a@]%0a[-''espaços foram adicionados para uma melhor leitura.''-]%0a%0a!! Usando coringas para cobrir espaços(:if false:)%25green%25[-(novo para pmwiki 2.1.beta21)-]:(:ifend:)%0a%0aO caractere * pode ser usado como um curinga para representar qualquer personagem, zero, um ou mais vezes.%0aO caractere ? pode ser usado como um curinga para representar qualquer caractere exatamente uma vez.%0aOs caracteres curinga ( * e ? ) podem ser usados com as condicionais de ''nome'' e ''grupo'', assim:%0a%0a(:table class='indent' border=0 cellpadding=0 cellspacing=0 valign=top:)%0a(:cellnr:)[@(:if name PmCal.2005* :)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)página atual está no grupo PmCal e inicie com 2005%0a(:cellnr:)[@(:if group PmWiki* :)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)Página atual está no grupo PmWiki ou um começando com PmWiki%0a(:cellnr:)[@(:if name Profiles.*,-Profiles.Profiles :)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)A página atual está no grupo [@Profiles@] mas não em [@Profiles.Profiles@]%0a(:tableend:)%0a%0a!!Usando [[PageTextVariables|+]], [[PageVariables|+]] e [[MarkupExpressions|+]]%0aVariáveis de Texto da Página -> Page text variables (PTVs), variáveis de página -> page variables (PVs) e  expressões de marcação-> markup expressions podem ser usadas em conditionais. Estes serão atribuidos/avaliados antes das condicionais. %0a%0a[[#combiningconditions]]%0a!! Combinando condicionais%0aCondicionais (como previamente definido) podem ser combinadas para formar expressões condicionais mais complexas usando uma das três formas equivalentes:%0a%0a->[@%0a(:if expr EXPRESSÃO :)%0a(:if [ EXPRESSÃO ] :)%0a(:if ( EXPRESSÃO ) :)@]%0a%0aAs condições são combinadas em expressões com operadores booleanos e parênteses.Na tabela ao lado, A e B são condições regulares ou sub-expressões entre colchetes de condições regulares:%0a%0a>>indent%3c%3c%0a|| border=1 cellpadding=2 cellspacing=0%0a||! Expression ||! Operator ||! Result ||%0a|| [@A and B@] || And ||TRUE se ambos A e B são TRUE.||%0a|| [@A or B@] || Or ||TRUE se ambos A ou B são TRUE.||%0a|| [@A xor B@] || Xor ||TRUE se ambos A ou B é TRUE, mas não ambos.||%0a|| [@! A@] || Not ||TRUE se A não é TRUE.||%0a|| [@A && B@] || And ||TRUE se ambos A e B são TRUE.||%0a|| [@A || B@] || Or ||TRUE se ambos A ou B são TRUE.||%0a>>%3c%3c%0a%0aExemplo%0a->[@%0a(:if [ name SomePage and group SomeGroup ]:)    equivalent to (:if name SomeGroup.SomePage:)@]%0a%0a'''Notas Importantes:'''%0a* Espaços são ''necessários'' no início e fim de operadores e parênteses.%0a* Nenhum aviso é dado para erros de sintaxe or unbalanced brackets.%0a* Use parênteses para expressões aninhadas.%0a%0aAssim, o que se segue é uma maneira válida de se construir uma expressão que mostra o seguinte conteúdo somente quando o usuário é o administrador, ou está conectado e o tempo é mais tarde que data indicada:%0a%0a->[@(:if [ auth admin || ( authid && date 2006-06-01.. ) ] :)@]%0a%0aAninhamento com colchetes falharão silenciosamente:%0a%0a->[@(:if [ auth admin || [ authid && date 2006-06-01 ] ] :) @]&nbsp;&nbsp;&nbsp;%25red%25NOTA: Não funciona!%0a%0aUm uso comum destes testes complexos para expressões como:%0a%0a->[@(:if expr auth admin || auth attr || auth edit :)@]%0a->[@[[Logout -> {$Name}?action=logout]]@]%0a->[@(:ifend:)@]%0a%0aque fornecem  um link de ''logout(saida)'' só quando o usuário tem permissões parar admin, attr, ou edit.%0a%0a%25audience%25 administradores (avançado)%0a!! Criando novas condicionais%0aVeja [[Cookbook:ConditionalMarkupSamples|+]].%0a%0aVeja também [[PmWiki/PageVariables#specialreferences|referências especiais]] para o uso de [={*$Variáveis}=].%0a%0a>>faq%3c%3c [[#faq]]
time=1315670403
title=Marcação Condicional
