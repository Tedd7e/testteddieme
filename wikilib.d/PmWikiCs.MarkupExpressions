version=pmwiki-2.2.30 ordered=1 urlencoded=1
author=Petr Novotný
charset=UTF-8
csum=
ctime=1188325115
name=PmWikiCs.MarkupExpressions
rev=8
targets=PmWikiCs.PageVariables,PmWikiCs.PageTextVariables,PmWikiCs.ConditionalMarkup,PmWikiCs.DocumentationIndex
text=(:Summary:Značkové výrazy (Markup expressions)  :)%0a(:title Markup expression(značkové výrazy, textové funkce..) :)%0a%25audience%25 authors (advanced)%0aSyntaxe [@{(...)}@] "značkového výrazu" umožňuje používat řadu funkcí pro práci s řetězcem a jeho formátování v rámci běžné editace obsahu stránky. Definované operace jsou ''substr'', ''ftime'', ''strlen'', ''rand'', ''toupper'', ''tolower'', ''ucfirst'', ''ucwords'', ''pagename'', a ''asspaced''.%0a%0a-> %25note%25 Značkové výrazy (Markup Expressions byly implementovány od PmWiki 2.2.0-beta43).  %0a%0a!! ''substr''%0a%0aMarkup expression "substr" extrahuje část řetězce. První parametr je zpracovávaný řetězec, druhý parametr je index prvního vybíraného písmene a třetí parametr určuje počet písmen od prvního vybíraného písmene (písmena jsou v řetězci indexována od nuly).%0a%0a(:markup class="horiz":)%0a {(substr "PmWiki" 2 3)}%0a {(substr "PmWiki" 2)}%0a {(substr "PmWiki" 0 1)}%0a(:markupend:)%0a%0a!! ''ftime''%0a%0a"Ftime" expressions se používají pro formátování data a času. Základní podoba je:%0a%0a->[@{(ftime "fmt" "when")}@]%0a->[@{(ftime fmt="fmt" when="when")}@]%0a%0akde ''fmt'' je formátovací řetězec, v něm můžeme použít znaky se speciálním významem, ''when'' je čas, který bude formátován. Parametry je možno volitelně zapisovat "fmt=" and "when=".%0a%0aPříklady:%0a(:markup class="horiz":)%0a {(ftime fmt="%25F %25H:%25M")}%0a {(ftime %25Y)}%0a {(ftime fmt=%25F)}%0a {(ftime yesterday)}%0a {(ftime when=tomorrow)}%0a {(ftime %25F yesterday)}%0a {(ftime week %25F)}%0a {(ftime fmt=%25F month)}%0a(:markupend:)%0a%0aParametr ''fmt'' se zapisuje buď "fmt=", nebo zápisem kterému předchází '%25', či jinak dle nastavení. %0aVýznam znaků pro formátování časových údajů vychází z jazyka PHP a je popsán na %25newwin%25 http://www.php.net/strftime.  Příklady základních znaků:%0a%0a    [= %25F            =]    # ISO-8601 datum      "{(ftime %25F)}"%0a    [= %25H:%25M:%25S      =]    # čas jako hh:mm:ss    "{(ftime %25H:%25M:%25S)}"%0a    [= %25m/%25d/%25Y      =]    # datum jako mm/dd/yyyy  "{(ftime %25m/%25d/%25Y)}"%0a    [= "%25A, %25B %25d, %25Y" =]  # slovně            "{(ftime "%25A, %25B %25d, %25Y")}"%0a%0aParametr ''when'' přijímá řadu různých formátů data. Zapisuje se buď "when=", nebo jako parametr následující parametru formátování času. Pár příkladů%0a%0a    2007-04-11            # ISO-8601 datum%0a    20070411              # data bez dvojteček, pomlček či teček%0a    2007-03               # měsíce%0a    @1176304315           # Unix timestamp (vteřiny uplynulé od 1-Jan-1970 00:00 UTC)%0a    now                   # aktuální čas%0a    today                 # today @ 00:00:00%0a    yesterday             # yesterday @ 00:00:00%0a    "next Monday"         # relative dates%0a    "last Thursday"       # relative dates%0a    "-3 days"             # před třemi dny%0a    "+2 weeks"            # za dva týdny%0a%0aU parametru ''when'' se užívá pro převod data funkce jazyka PHP %25newwin%25[[(http://www.php.net/)strtotime]] do GNU [[http://gnu.org/software/tar/manual/html_node/tar_109.html|formátu]]; která přijímá fráze definované pouze v angličtině (tj. není možný zápis "when=dnes..").%0a%0aProměnná $FTimeFmt umožňuje změnit výchozí formát data této funkce. Výchozí hodnota $FTimeFmt je $TimeFmt.%0a%0a!! ''strlen''%0a%0aExpression "strlen" vrací délku řetězce. První parametr je analyzovaný řetězec.%0a%0a(:markup class="horiz":)%0a {(strlen "{$:Summary}")}%0a(:markupend:)%0a%0a!! ''rand''%0a%0aExpression "rand" vrací náhodné číslo (integer). První parametr je dolní mez , druhý parametr určuje horní mez generátoru náhodných čísel. Při použití bbez parametrů, vrací číslo mezi 0 a RAND MAX. %0aPříklad: pro náhodné číslo mezi 5 a 15 (včetně) zapiště rand (5, 15).%0a%0a(:markup class="horiz":)%0a {(rand)}%0a(:markupend:)%0a%0a!! ''toupper'' / ''tolower''%0a%0aExpression "toupper" a "tolower" konvertuje řatězec na velká či malá písmena. První parametr je výchozí řetězec.%0a%0a(:markup class="horiz":)%0a {(toupper "{$:Summary}")}%0a {(tolower "{$:Summary}")}%0a(:markupend:)%0a%0a!! ''ucfirst''%0a%0aExpression "ucfirst"  konvertuje první písmeno řetězce na velké. Parametrem je výchozí řetězec.%0a(:markup class="horiz":)%0a {(ucfirst "{$:Summary}")}%0a(:markupend:)%0a%0a!! ''ucwords''%0a%0aExpresssion "ucwords" konvertuje první písmena všech slov ve výchozím řetězci, který je také jediným parametrem.%0a%0a(:markup class="horiz":)%0a {(ucwords "{$:Summary}")}%0a(:markupend:)%0a%0a!! ''pagename''%0a%0aExpression "pagename" vytvoří název stránky z řetězce jediného parametru. (nejedná se o odkaz, text je neaktivní).%0a%0a!! ''asspaced''%0a%0aThe "asspaced" expression rozloží wikislovo na jednotlivé slova. Parametrem je řetězec.%0a%0a!! Vnořování funkcí%0a%0aMarkup expression(značkové výrazy, textové funkce..) mohou být vzájemně vnořeny:%0a%0a(:markup class="horiz":)%0a {(tolower (substr "Hello World" 2))}%0a(:markupend:)%0a    %0a!! Poznámky%0a%0a* Některé z funkcí pro práci s řetězcem mohou pracovat chybně na znacích kodování UTF-8 a na escape(speciálních) znacích.%0a* Značka ftime nepracuje s některými ISO 8601 daty jako: [={(ftime fmt="%25m/%25d/%25Y @ %25H:%25M:%25S" when="20070626T2400")}=] poté vrací: {(ftime fmt="%25m/%25d/%25Y/%25H:%25M:%25S" when="20070626T2400")}. Zadáme-li zobrazit pouze samotný čas:: [={(ftime fmt="%25H:%25M:%25S" when="20070626T2400")}=] poté vrací: {(ftime fmt="%25H:%25M:%25S" when="20070626T2400")} (pmwiki version: {$Version})%0a%0a!! Viz také%0a* [[Page variables|Proměnné stránky]], [[Page text variables|Textové proměnné stránky ]]%0a* [[Conditional markup|Podmíněné značkování]]%0a%0a%0a%25trail%25 %3c%3c|[[Documentation Index | Index dokumentace]]|>>%0a
time=1315668571
title=Markup expression(značkové výrazy, textové funkce..)
