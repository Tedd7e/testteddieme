version=pmwiki-2.2.35 ordered=1 urlencoded=1
author=Caroline Guénette
charset=UTF-8
csum=Ajout d'un lien pour HandleAuth
name=PmWikiFr.PasswordsAdmin
rev=27
targets=PmWikiFr.Security,PmWikiFr.WikiGroup,PmWikiFr.Passwords,PmWikiFr.WikiAdministrator,PmWikiFr.LocalCustomizations,PmWikiFr.Uploads,PmWikiFr.AuthUser,PmWikiFr.PasswordsAdmin,PmWiki.SecurityVariables,PmWikiFr.IndexDocAdmin
text=(:title Administration des mots de passe:)%0aPmWiki possède un système intégré de gestion d'accès par mots de passe à différentes parties du site. Ces mots de passe peuvent être appliqués à des pages individuelles, à des [[groupes Wiki->WikiGroup]], ou à l'ensemble du site Wiki. Notez que les mots de passe ne sont qu'une petite partie de l'aspect sécurité d'un site Wiki, pour un aperçu global, consultez [[PmWikiFr.Security|Les Sécurités de PmWiki]]. %0a%0aLes auteurs peuvent utiliser `PmWiki pour ajouter des mots de passe aux pages individuelles et aux [[WikiGroup|+]] comme décrit dans [[Passwords|+]].  Cependant, [[PmWikiFr.WikiAdministrator|Les administrateurs Wiki]] peuvent aussi appliquer des mots de passe grâce à des fichiers [[LocalCustomizations|de personnalisation]] comme décrit ci-dessous.%0a%0a!! Les bases des mots de passe%0a%0aPmWiki supporte plusieurs types d'accès aux pages wiki.%0a-> @@read@@ est le mot de passe qui autorise la lecture des pages.%0a-> @@edit@@ est celui qui autorise l'édition et la modification des pages.%0a-> @@attr@@ est celui qui autorise l'initialisation et la modification des mots de passe pour les différents attributs (et potentiellement d'autres attributs futurs).%0a-> @@upload@@ autorise la possibilité d'attacher des fichiers (si la fonctionnalité [[Uploads|+]] est activée).%0a%0aEnfin, il y a un mot de passe ''admin'' qui permet à l'administrateur de prendre la main sur tout mot de passe affecté à une page ou un groupe.%0a%0aPar défaut, PmWiki a la configuration de mots de passe suivante:%0a* Les mots de passe @@admin@@ et @@upload@@ sont bloqués par défaut%0a* Les groupes Main et PmWiki ont un mot de passe @@attr@@ bloqué (dans leurs pages .GroupAttributes respectives).%0a* Les pages dans le groupe Site sont bloquées contre l'édition, excepté Site.SideBar.%0a%0aUn mot de passe @@admin@@ peut être utilisé pour dépasser les mots de passe bloqués, sinon, aucun mot de passe ne permettra l'accès.  %0a%0aRegarder [[PmWikiFr.Passwords|Mots de passe]] pour de l'information au sujet de l'application de mots de passe par page et par groupe. Le reste de cette page décrit l'application des mots de passe pour l'ensemble du site depuis le fichier ''local/config.php''.%0a%0a!! Application de mots de passe au site entier%0a%0aLa première chose qu'un administrateur devrait savoir est d'appliquer un mot de passe @@admin@@ au site.  Ceci est réalisé par une ligne dans le fichier ''local/config.php'' comme ce qui suit:%0a%0a    $DefaultPasswords['admin'] = crypt('secret_password');%0a%0aNotez que l'appel crypt() est requis pour cela -- PmWiki stocke et gère tous les mots de passe%0acomme des objets cryptés. Voyez le  [[#crypt | crypt section]] dessous pour des détails sur l'élimination des mots de passe en clair dans le fichier de configuration.%0a%0aPour restreindre l'édition du site entier à ceux qui connaissent le mot de passe "edit",%0aAjoutez une ligne comme suit au fichier ''local/config.php'':%0a%0a    $DefaultPasswords['edit'] = crypt('edit_password');%0a%0aDe même, vous pouvez activer [@$DefaultPasswords['read']@], [@$DefaultPasswords['attr']@], et [@$DefaultPasswords['upload']@] pour contrôler les mots de passe par défaut @@read@@, @@edit@@, and @@upload@@ pour le site entier.  Les mots de passe par défaut sont utilisés seulement pour les pages qui n'ont pas de mot de passe actifs.  De plus, chaque valeur $DefaultPasswords peut contenir une rangée de mots de passe:%0a%0a    $DefaultPasswords['read'] = array(crypt('alpha'), crypt('beta'));%0a    $DefaultPasswords['edit'] = crypt('beta');%0a%0aCes lignes signifient que "alpha" ou bien "beta" peuvent être utilisés pour lire les pages, mais seul le mot de passe "beta" accordera l'autorisation d'éditer une page. Comme PmWiki retient n'importe quel mot de passe entré durant la session en cours, le mot de passe "beta" permettra à la fois la lecture et l'écriture des pages, tandis que le mot de passe "alpha" permet seulement la lecture. Une personne sans aucun mot de passe ne pourra consulter aucune page.%0a%0a!! Connexion avec Identification  ( requière un nom d'utilisateur plus un mot de passe [[AuthUser]])%0a%0aContrairement à beaucoup de systèmes qui ont une méthode d'identification pour contrôler l'accès aux pages (c'est à dire,avec un ''nom d'utilisateur'' et un ''mot de passe'' pour chaque personne), PmWiki est par défaut un système ''à mot de passe'' comme décrit ci-dessus. En général les systèmes de ce type sont souvent plus faciles à maintenir car ils évitent les tâches administratif de création de comptes utilisateur, de récupération des mots de passe perdus et la gestion des droits  accordés à chaque utilisateur.%0a%0aNéamoins, le script ''authuser.php'' de PmWiki ajoute au système à mot de passe un contrôle par couple nom d'utilisateur et mot de passe. Consultez [[AuthUser]] pour plus de détails sur la gestion des accès aux pages basées sur les identités d'utilisateurs.%0a%0a!!Trous de sécurité ...%0a%0aLes administrateurs doivent planifier soigneusement comment sont utilisés les mots de passe afin d'éviter d'ouvrir accidentellement des trous de sécurité. Si votre Wiki est ouvert (quiconque peut lire et écrire), ceci ne semble pas un problème, '''sauf''', un utilisateur malveillant ou maladroit pourrait créer un mot de passe de lecture à un groupe et ainsi rendre le groupe complètement inaccessible à tous. Au minimum, m^me un wiki ouvert doit posséder un mot de passe "administrateur" et "attr" (mots de passe) global au site définis dans le fichier config.php. Le fichier exemple ''sample-config.php'' distribué avec PmWiki indique que les groupes PmWiki et Main ont la function "attr" verrouillée par défaut, mais si quelqu'un crée un nouveau groupe, "attr" est déverrouillé. Un administrateur doit dans ce cas se rappeller qu'il faut définir des mots de passe "attr" pour chaque nouveau groupe (si souhaité). Une solution plus simple est d'inclure ces lignes dans le fichier ''config.php'' :%0a%0a-> [@%0a$DefaultPasswords['admin'] = crypt('votremotdepasseadmin');%0a$DefaultPasswords['attr'] = crypt('votremotdepasseattr');%0a@]%0a%0a!! Encryption des mots de passe dans ''config.php'' [[#crypt]]%0a%0aUn des problèmes lié au fait d'utiliser la fonction crypt() pour coder les mots de passe dans ''config.php'' est que tous ceux qui peuvent lire ce fichier vont voir le mot de passe non crypté. Par exemple, si ''config.php'' contient%0a%0a    $DefaultPasswords['admin'] = crypt('monsecret');%0a%0aalors le mot de passe "monsecret" est visible en clair pour d'autres.  Cependant, un administrateur wiki peut obtenir et utiliser une forme cryptée du'un mot de passe directement en utilisant [@?action=crypt@] sur n'importe quelle adresse url de PmWiki url (ou simplement en allant sur [[{$Name}?action=crypt]]). Cette action présente un formulaire qui génère des versions cryptées des mots de passe à utiliser dans le fichier ''config.php''.  Par exemple, quand [@?action=crypt@] recoit le mot de passe "@@monsecret@@", PmWiki renverra une chaîne du genre%0a%0a    [@$1$hMMhCdfT$mZSCh.BJOidMRn4SOUUSi1@]%0a%0aLa chaîne renvoyée par [@?action=crypt@] peut alors être plaçée directement dans config.php, comme ceci:%0a%0a    $DefaultPasswords['admin'] = [='$1$hMMhCdfT$mZSCh.BJOidMRn4SOUUSi1'=];  %0a%0aNotez que la fonction ''crypt'' et les parenthèses sont supprimées, puisque le mot de passe est déjà crypté. Le mot de passe doit être entre apostrophes simples. Dans cet exemple le mot de passe est toujours "@@monsecret@@", mais quelqu'un ayant accès à ''config.php'' ne pourra pas le connaître en lisant le fichier. ''Crypt'' peut vous proposer des formes différentes pour un même mot de passe --ceci est normal (et augmente la difficulté à découvrir le mot de passe original).%0a%0a!! Supprimer un mot de passe%0a%0aPour supprimer totalement un mot de passe de site, comme le mot de passe pour les envois de fichiers, créer une variable vide:%0a%0a    $DefaultPasswords['upload'] = '';%0a%0aVous pouvez aussi utiliser le mot de passe spécial "nopass" (ddéfini dans la variable $AllowPassword) via @@?action=attr@@ pour avoir une page non protégée par mot de passe à l'intérieur d'un groupe protégé par mot de passe, ou un groupe non protégé par mot de passe avec un site doté d'un mot de passe global.%0a%0aLa suppression d'un mot de passe peut être faite dans la page [@?action=attr@]par le rajout  :%0a%0a    @nopass%0a%0aOu pour seulement effacer des mots de passe spécifiques qui avaient été rajoutés au groupe :%0a    clear%0a    %0a%0a%0a!! Révocation ou invalidation d'un mot de passe%0a%0aSi un mot de passe a été découvert et que l'administrateur veut annuller rapidement tous les usages de ce mot de passe sur un site, une solution rapide est d'écrire dans le fichier ''local/config.php'':%0a%0a    $ForbiddenPasswords = array('secret', 'tanstaafl');%0a    if (in_array(@$_POST['authpw'], $ForbiddenPasswords)) %0a      unset($_POST['authpw']);%0a%0aCeci empêche  "secret" et "tanstaafl" d'être accepté comme un mot de passe d'autorisation valide, Quelque soit la page qui l'utilise.%0a%0a!! Voir aussi%0a%0a* Le tableau [[$HandleAuth -> PmWiki/SecurityVariables#HandleAuth]](:comment Page en français non trouvée...?:), qui définit le niveau d'authentification requis pour effectuer une action.%0a%0a%25trail%25%3c%3c|[[Index doc admin]]|>>
time=1324160993
title=Administration des mots de passe
